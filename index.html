<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luxury Fashion Data Story</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Didot', 'Bodoni MT', 'Cochin', 'Baskerville', 'Goudy Old Style', 'Palatino', serif;
            overflow-x: hidden;
            background: #000000;
            color: #3d2817;
        }

        /* Custom Luxury Cursor - Hidden for better usability */
        #cursor {
            display: none;
        }

        #cursor-follower {
            display: none;
        }

        /* Scroll Container */
        .scroll-container {
            scroll-snap-type: y mandatory;
            overflow-y: scroll;
            height: 100vh;
            scroll-behavior: smooth;
        }

        /* Slide Sections */
        .slide {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            scroll-snap-align: start;
            padding: 60px 80px;
            overflow: hidden;
        }

        /* Animated Background Gradients */
        .slide-1 {
            background: linear-gradient(135deg, #000000 0%, #000000 50%, #000000 100%);
            animation: gradientShift 10s ease infinite;
        }

        .slide-2 {
            background: linear-gradient(135deg, #000000 0%, #000000 50%, #000000 100%);
        }

        .slide-3 {
            background: linear-gradient(135deg, #000000 0%, #000000 50%, #000000 100%);
        }

        .slide-3 .slide-content {
            max-width: 100%;
            padding: 0 40px;
        }

        .slide-4 {
            background: linear-gradient(135deg, #000000 0%, #000000 50%, #000000 100%);
        }

        .slide-5 {
            background: linear-gradient(135deg, #000000 0%, #000000 50%, #000000 100%);
        }

        .slide-6 {
            background: linear-gradient(135deg, #000000 0%, #000000 50%, #000000 100%);
        }

        .slide-6 .slide-content {
            max-width: 1200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .slide-6 .section-title {
            text-align: center;
            margin-bottom: 5px;
            font-size: 3em;
            padding-bottom: 8px;
        }

        .slide-6 .section-subtitle {
            text-align: center;
            margin-bottom: 15px;
            font-size: 0.95em;
        }

        .slide-6 .stats-grid {
            gap: 20px;
            margin-top: 15px;
        }

        .slide-6 .stat-card {
            padding: 25px 20px;
        }

        .slide-6 .stat-number {
            font-size: 2.8em;
        }

        .slide-6 .stat-label {
            font-size: 0.95em;
        }

        .slide-6 .viz-container {
            width: 100%;
            max-width: 1050px;
            padding: 20px;
            margin-top: 20px !important;
        }

        .slide-7 {
            background: linear-gradient(135deg, #000000 0%, #000000 50%, #000000 100%);
        }

        .slide-8 {
            background: linear-gradient(135deg, #000000 0%, #000000 50%, #000000 100%);
        }

        .slide-9 {
            background: linear-gradient(135deg, #000000 0%, #000000 50%, #000000 100%);
        }

        .slide-pricing {
            background: linear-gradient(135deg, #000000 0%, #000000 50%, #000000 100%);
        }

        .slide-10 {
            background: linear-gradient(135deg, #000000 0%, #000000 50%, #000000 100%);
        }

        .slide-11 {
            background: linear-gradient(135deg, #000000 0%, #000000 50%, #000000 100%);
        }

        .slide-12 {
            background: linear-gradient(135deg, #000000 0%, #000000 50%, #000000 100%);
        }

        .slide-12 .slide-content {
            max-width: 1200px;
        }

        .slide-12 .section-title {
            font-size: 2.5em;
            margin-bottom: 15px;
        }

        .slide-12 .section-subtitle {
            font-size: 1.1em;
            margin-bottom: 20px;
        }

        .slide-12 .viz-container {
            padding: 25px;
            margin-top: 10px;
        }

        .slide-12 .controls {
            margin-top: 20px;
            gap: 12px;
        }

        .slide-12 .luxury-button {
            padding: 10px 25px;
            font-size: 0.85em;
        }

        .slide-13 {
            background: linear-gradient(135deg, #000000 0%, #000000 50%, #000000 100%);
        }

        .slide-14 {
            background: linear-gradient(135deg, #000000 0%, #000000 50%, #000000 100%);
        }

        .slide-15 {
            background: linear-gradient(135deg, #000000 0%, #000000 50%, #000000 100%);
        }

        .slide-16 {
            background: linear-gradient(135deg, #000000 0%, #000000 50%, #000000 100%);
        }

        .slide-17 {
            background: linear-gradient(135deg, #000000 0%, #000000 50%, #000000 100%);
        }

        .slide-18 {
            background: linear-gradient(135deg, #000000 0%, #000000 50%, #000000 100%);
        }

        /* Chapter Slides - Special styling for narrative breaks */
        .slide-chapter {
            background: radial-gradient(ellipse at center, #f7f3ed 0%, #fdf9f3 100%);
            position: relative;
        }

        .slide-chapter::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                repeating-linear-gradient(
                    0deg,
                    transparent,
                    transparent 2px,
                    rgba(255, 215, 0, 0.03) 2px,
                    rgba(255, 215, 0, 0.03) 4px
                );
            pointer-events: none;
        }

        .chapter-content {
            text-align: center;
            max-width: 900px;
            margin: 0 auto;
            padding: 100px 40px;
        }

        .chapter-number {
            font-size: 0.9em;
            letter-spacing: 0.3em;
            color: #a0826b;
            margin-bottom: 30px;
            font-weight: 300;
            opacity: 0.8;
        }

        .chapter-title {
            font-size: 3em;
            font-weight: 200;
            letter-spacing: 0.15em;
            margin-bottom: 40px;
            color: #4a3520;
            text-transform: uppercase;
            position: relative;
            display: inline-block;
        }

        .chapter-title::after {
            content: '';
            position: absolute;
            bottom: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 60%;
            height: 1px;
            background: linear-gradient(90deg, transparent, #a0826b, transparent);
        }

        .chapter-text {
            font-size: 1.3em;
            line-height: 2em;
            color: #6b5335;
            font-weight: 300;
            letter-spacing: 0.05em;
            margin-top: 60px;
            font-style: italic;
        }

        /* Insights Slides */
        .slide-insights {
            background: linear-gradient(135deg, #000000 0%, #000000 50%, #000000 100%);
        }

        .slide-vestiaire {
            background: linear-gradient(135deg, #000000 0%, #000000 50%, #000000 100%);
        }

        #vestiaire-viz {
            width: 100%;
            height: 550px;
            position: relative;
        }

        .vestiaire-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .insights-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 40px;
            margin-top: 60px;
        }

        .insight-card {
            background: rgba(255, 215, 0, 0.05);
            border: 1px solid rgba(255, 215, 0, 0.2);
            border-radius: 12px;
            padding: 40px 30px;
            text-align: center;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .insight-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 215, 0, 0.1), transparent);
            transition: left 0.6s;
        }

        .insight-card:hover {
            transform: translateY(-10px);
            border-color: rgba(255, 215, 0, 0.5);
            box-shadow: 0 20px 60px rgba(255, 215, 0, 0.2);
        }

        .insight-card:hover::before {
            left: 100%;
        }

        .highlight-card {
            border-color: rgba(255, 215, 0, 0.4);
            background: rgba(255, 215, 0, 0.08);
        }

        .insight-icon {
            font-size: 3em;
            margin-bottom: 20px;
            opacity: 0.9;
        }

        .insight-stat {
            font-size: 2.5em;
            color: #ffffff;
            font-weight: 300;
            letter-spacing: 0.05em;
            margin-bottom: 10px;
        }

        .insight-label {
            font-size: 1em;
            color: #a0826b;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            margin-bottom: 20px;
            font-weight: 500;
        }

        .insight-description {
            font-size: 0.95em;
            color: #a0826b;
            line-height: 1.6em;
            font-weight: 300;
        }

        @keyframes gradientShift {
            0%, 100% { filter: hue-rotate(0deg); }
            50% { filter: hue-rotate(20deg); }
        }

        /* Content Container */
        .slide-content {
            max-width: 1400px;
            width: 100%;
            opacity: 0;
            transform: translateY(50px);
            transition: all 1s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .slide-content.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Title Slide Styles */
        .title-container {
            text-align: center;
            position: relative;
        }

        .main-title {
            font-size: 6em;
            font-weight: 300;
            letter-spacing: 0.1em;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #FFD700 0%, #ffffff 50%, #FFD700 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: shimmer 3s ease-in-out infinite;
            text-transform: uppercase;
        }

        @keyframes shimmer {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .subtitle {
            font-size: 1.8em;
            font-weight: 300;
            letter-spacing: 0.3em;
            color: #ffffff;
            margin-bottom: 40px;
            text-transform: uppercase;
        }

        .scroll-hint {
            position: absolute;
            bottom: -100px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.9em;
            letter-spacing: 0.2em;
            color: #ffffff;
            text-transform: uppercase;
        }

        .scroll-indicator {
            width: 30px;
            height: 50px;
            border: 2px solid #ffffff;
            border-radius: 15px;
            margin: 20px auto;
            position: relative;
        }

        .scroll-indicator::before {
            content: '';
            position: absolute;
            top: 8px;
            left: 50%;
            width: 6px;
            height: 6px;
            background: #ffffff;
            border-radius: 50%;
            transform: translateX(-50%);
            animation: scrollDown 2s infinite;
        }

        @keyframes scrollDown {
            0%, 100% { top: 8px; opacity: 1; }
            100% { top: 32px; opacity: 0; }
        }

        /* Section Titles */
        .section-title {
            font-size: 3em;
            font-weight: 300;
            letter-spacing: 0.08em;
            margin-bottom: 30px;
            color: #ffffff;
            text-transform: uppercase;
            border-bottom: 2px solid rgba(139, 111, 71, 0.3);
            padding-bottom: 20px;
        }

        .section-subtitle {
            font-size: 1.4em;
            color: #a0826b;
            margin-bottom: 50px;
            font-weight: 300;
            font-style: italic;
            letter-spacing: 0.05em;
        }

        /* Visualization Container */
        .viz-container {
            background: rgba(255, 255, 255, 0.6);
            padding: 40px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(139, 105, 20, 0.2);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            transition: all 0.4s ease;
        }

        .viz-container:hover {
            border-color: rgba(139, 105, 20, 0.4);
            box-shadow: 0 15px 50px rgba(139, 105, 20, 0.15);
            transform: translateY(-5px);
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 40px;
            margin-top: 50px;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, rgba(255, 215, 0, 0.02) 100%);
            padding: 40px 30px;
            border-radius: 15px;
            text-align: center;
            border: 1px solid rgba(255, 215, 0, 0.2);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 215, 0, 0.1), transparent);
            transition: left 0.5s;
        }

        .stat-card:hover::before {
            left: 100%;
        }

        .stat-card:hover {
            transform: translateY(-10px) scale(1.05);
            border-color: rgba(255, 215, 0, 0.6);
            box-shadow: 0 20px 40px rgba(255, 215, 0, 0.2);
        }

        .stat-number {
            font-size: 3.5em;
            font-weight: 300;
            color: #ffffff;
            margin-bottom: 10px;
            letter-spacing: 0.05em;
        }

        .stat-label {
            font-size: 1.1em;
            color: #a0826b;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            font-weight: 300;
        }

        /* Brand Showcase */
        .brand-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 50px;
            margin-top: 60px;
        }

        .brand-card {
            text-align: center;
            padding: 50px 30px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 20px;
            border: 1px solid rgba(255, 215, 0, 0.15);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }

        .brand-card::after {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 20px;
            padding: 2px;
            background: linear-gradient(135deg, #FFD700, transparent, #FFD700);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            opacity: 0;
            transition: opacity 0.5s;
        }

        .brand-card:hover::after {
            opacity: 1;
        }

        .brand-card:hover {
            transform: translateY(-15px);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.6);
        }

        .brand-name {
            font-size: 2.5em;
            margin-bottom: 20px;
            letter-spacing: 0.1em;
            font-weight: 300;
        }

        .brand-metric {
            font-size: 2em;
            color: #2c1810;
            margin: 15px 0;
            font-weight: 300;
        }

        .brand-description {
            color: #3d2817;
            font-size: 1em;
            line-height: 1.6;
            margin-top: 20px;
            font-style: italic;
        }

        /* SVG Styles */
        svg {
            display: block;
            margin: 0 auto;
            filter: drop-shadow(0 10px 30px rgba(0, 0, 0, 0.5));
        }

        .axis line, .axis path {
            stroke: rgba(26, 15, 10, 0.3);
        }

        .axis text {
            fill: #3d2817;
            font-size: 12px;
            font-family: 'Helvetica Neue', sans-serif;
        }

        /* Tooltip */
        .tooltip {
            position: absolute;
            background: rgba(253, 249, 243, 0.98);
            color: #1a0f0a;
            padding: 15px 20px;
            border-radius: 10px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 14px;
            border: 2px solid rgba(92, 61, 31, 0.3);
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(92, 61, 31, 0.15);
            z-index: 1000;
            letter-spacing: 0.05em;
        }

        .tooltip strong {
            color: #1a0f0a;
            font-weight: 600;
        }

        /* Controls */
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .luxury-button {
            padding: 12px 35px;
            background: transparent;
            border: 2px solid #FFD700;
            color: #FFD700;
            font-size: 0.95em;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            font-family: 'Helvetica Neue', sans-serif;
            font-weight: 300;
        }

        .luxury-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 215, 0, 0.3), transparent);
            transition: left 0.5s;
        }

        .luxury-button:hover::before {
            left: 100%;
        }

        .luxury-button:hover {
            background: rgba(255, 215, 0, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.3);
        }

        .luxury-button.active {
            background: #FFD700;
            color: #000000;
            font-weight: 500;
        }

        /* Buttons on light backgrounds (chapter slides) */
        .slide-chapter .luxury-button {
            border: 2px solid #6b5335;
            color: #6b5335;
        }

        .slide-chapter .luxury-button::before {
            background: linear-gradient(90deg, transparent, rgba(107, 83, 53, 0.3), transparent);
        }

        .slide-chapter .luxury-button:hover {
            background: rgba(107, 83, 53, 0.2);
            box-shadow: 0 10px 30px rgba(107, 83, 53, 0.3);
        }

        .slide-chapter .luxury-button.active {
            background: #6b5335;
            color: #f7f3ed;
        }

        /* Decorative Elements */
        .decorative-line {
            width: 100px;
            height: 2px;
            background: linear-gradient(90deg, transparent, #1a0f0a, transparent);
            margin: 30px auto;
        }

        /* Side Navigation Dots */
        .slide-nav {
            position: fixed;
            right: 40px;
            top: 50%;
            transform: translateY(-50%);
            z-index: 1000;
        }

        .nav-dot {
            width: 12px;
            height: 12px;
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            margin: 20px 0;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .nav-dot::before {
            content: attr(data-slide);
            position: absolute;
            right: 25px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.8em;
            color: rgba(255, 255, 255, 0.7);
            letter-spacing: 0.1em;
            opacity: 0;
            transition: opacity 0.3s;
            white-space: nowrap;
            text-transform: uppercase;
        }

        .nav-dot:hover::before {
            opacity: 1;
        }

        .nav-dot.active {
            background: #FFD700;
            border-color: #FFD700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
        }

        /* Navigation dots on light backgrounds (chapter slides) */
        .slide-chapter ~ * .nav-dot,
        body:has(.slide-chapter:target) .nav-dot {
            border-color: rgba(107, 83, 53, 0.5);
        }

        .slide-chapter ~ * .nav-dot::before,
        body:has(.slide-chapter:target) .nav-dot::before {
            color: rgba(107, 83, 53, 0.7);
        }

        .slide-chapter ~ * .nav-dot.active,
        body:has(.slide-chapter:target) .nav-dot.active {
            background: #6b5335;
            border-color: #6b5335;
            box-shadow: 0 0 20px rgba(107, 83, 53, 0.6);
        }

        /* Timeline Styles */
        .timeline-container {
            position: relative;
            width: 100%;
            max-width: 1400px;
            margin: 50px auto;
            padding: 40px 0;
        }

        .timeline-axis {
            position: absolute;
            height: 4px;
            background: linear-gradient(90deg, transparent, rgba(139, 111, 71, 0.5), transparent);
            top: 50%;
            transform: translateY(-50%);
            width: 100%;
            box-shadow: 0 0 20px rgba(139, 111, 71, 0.2);
        }

        .timeline-year-marker {
            position: absolute;
            top: -35px;
            transform: translateX(-50%);
            font-size: 0.9em;
            color: #ffffff;
            letter-spacing: 0.1em;
            font-weight: 300;
        }

        .timeline-track {
            position: relative;
            min-height: 200px;
            display: flex;
            align-items: center;
        }

        .timeline-dot {
            position: absolute;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 3px solid #ffffff;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 5;
            top: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 0 0 currentColor;
        }

        .timeline-dot:hover {
            transform: translate(-50%, -50%) scale(1.8);
            box-shadow: 0 0 30px currentColor;
            z-index: 100;
        }

        .timeline-dot::before {
            content: '';
            position: absolute;
            inset: -8px;
            border-radius: 50%;
            background: transparent;
        }

        .timeline-popup {
            position: absolute;
            width: 160px;
            background: rgba(0, 0, 0, 0.98);
            border: 1px solid currentColor;
            border-radius: 8px;
            padding: 10px;
            pointer-events: none;
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1000;
            bottom: 120%;
            left: 50%;
            transform: translateX(-50%) translateY(10px);
            box-shadow: 0 15px 40px rgba(139, 111, 71, 0.3);
            backdrop-filter: blur(10px);
        }

        .timeline-popup::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-top-color: currentColor;
        }

        .timeline-dot:hover .timeline-popup {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
            pointer-events: auto;
        }

        /* Global Traffic Visualization Styles */
        #global-traffic-viz {
            width: 100%;
            height: 450px;
            position: relative;
        }

        .traffic-insights {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 20px;
        }

        .insight-box {
            text-align: center;
            padding: 15px 25px;
            background: rgba(139, 69, 19, 0.1);
            border: 2px solid rgba(139, 69, 19, 0.3);
            border-radius: 8px;
            backdrop-filter: blur(10px);
        }

        .insight-label {
            font-size: 0.8em;
            color: #ffffff;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .insight-value {
            font-size: 1.6em;
            color: #8B4513;
            font-weight: 600;
            letter-spacing: 0.05em;
        }

        .country-bar {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .country-bar:hover {
            opacity: 0.7;
        }

        .growth-indicator {
            font-size: 0.8em;
            fill: #4ade80;
        }

        .traffic-tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.95);
            border: 1px solid #FFD700;
            padding: 15px;
            border-radius: 8px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            color: #fff;
            font-size: 0.9em;
            backdrop-filter: blur(10px);
            z-index: 1000;
        }

        .traffic-tooltip.visible {
            opacity: 1;
        }

        .tooltip-country {
            font-size: 1.2em;
            color: #FFD700;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .tooltip-stat {
            margin: 5px 0;
            display: flex;
            justify-content: space-between;
            gap: 15px;
        }

        .tooltip-label {
            color: #999;
        }

        .tooltip-value {
            color: #fff;
            font-weight: 500;
        }

        .timeline-year {
            font-size: 0.95em;
            font-weight: 400;
            color: #ffffff;
            margin-bottom: 4px;
            letter-spacing: 0.05em;
        }

        .timeline-title {
            font-size: 0.8em;
            color: #ffffff;
            margin-bottom: 4px;
            font-weight: 400;
            line-height: 1.15;
        }

        .timeline-description {
            font-size: 0.68em;
            color: #ffffff;
            line-height: 1.25;
            font-style: italic;
        }

        .timeline-brand-label {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 6px;
            font-size: 0.6em;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            margin-bottom: 6px;
            font-weight: 500;
            background: currentColor;
            color: #000000;
        }

        .timeline-scroll-container {
            overflow-x: auto;
            overflow-y: visible;
            padding: 140px 100px 80px 200px;
            scrollbar-width: thin;
            scrollbar-color: rgba(139, 111, 71, 0.3) transparent;
        }

        .timeline-scroll-container::-webkit-scrollbar {
            height: 8px;
        }

        .timeline-scroll-container::-webkit-scrollbar-track {
            background: rgba(139, 111, 71, 0.1);
            border-radius: 4px;
            margin: 0 20px;
        }

        .timeline-scroll-container::-webkit-scrollbar-thumb {
            background: rgba(139, 111, 71, 0.4);
            border-radius: 4px;
        }

        .timeline-scroll-container::-webkit-scrollbar-thumb:hover {
            background: rgba(139, 111, 71, 0.6);
        }

        .timeline-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
        }

        .timeline-legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 40px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 10px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .legend-dot {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            border: 3px solid #ffffff;
        }

        .legend-label {
            font-size: 0.9em;
            color: #ffffff;
            letter-spacing: 0.1em;
        }

        /* Acknowledgements & Team Styles */
        .acknowledgements-content, .team-content {
            text-align: center;
            max-width: 800px;
            margin: 0 auto;
        }

        .ack-section {
            margin: 50px 0;
            padding: 40px;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 15px;
            border: 1px solid rgba(255, 215, 0, 0.2);
        }

        .ack-title {
            font-size: 1.8em;
            color: #FFD700;
            margin-bottom: 20px;
            letter-spacing: 0.1em;
            font-weight: 300;
        }

        .ack-text {
            font-size: 1.1em;
            color: #b8b8b8;
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .ack-list {
            list-style: none;
            padding: 0;
            margin: 20px 0;
        }

        .ack-list li {
            font-size: 1em;
            color: #999;
            margin: 10px 0;
            letter-spacing: 0.05em;
        }

        .team-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
            margin-top: 50px;
        }

        .team-member {
            padding: 40px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 215, 0, 0.2);
            border-radius: 20px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .team-member:hover {
            transform: translateY(-10px);
            border-color: rgba(255, 215, 0, 0.5);
            box-shadow: 0 20px 40px rgba(255, 215, 0, 0.15);
        }

        .team-name {
            font-size: 2em;
            color: #FFD700;
            margin-bottom: 15px;
            letter-spacing: 0.08em;
            font-weight: 300;
        }

        .team-email {
            font-size: 1.1em;
            color: #999;
            letter-spacing: 0.05em;
            font-family: 'Courier New', monospace;
        }

        .team-email a {
            color: #FFD700;
            text-decoration: none;
            transition: color 0.3s;
        }

        .team-email a:hover {
            color: #f5e6c8;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .main-title { font-size: 4em; }
            .section-title { font-size: 3em; }
            .stats-grid, .brand-grid { grid-template-columns: 1fr; }
            .slide { padding: 40px; }
        }

        /* Product Carousel Styles */
        .carousel-container {
            position: relative;
            width: 100%;
            max-width: 1200px;
            margin: 50px auto;
            overflow: hidden;
        }

        .carousel-track {
            display: flex;
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            gap: 40px;
            padding: 20px 0;
        }

        .product-card {
            min-width: 320px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 215, 0, 0.2);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .product-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.1) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.5s;
        }

        .product-card:hover::before {
            opacity: 1;
        }

        .product-card:hover {
            transform: translateY(-15px) scale(1.05);
            border-color: rgba(255, 215, 0, 0.6);
            box-shadow: 0 30px 60px rgba(255, 215, 0, 0.2);
        }

        .product-image-container {
            width: 100%;
            height: 280px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }

        .product-image {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.3));
        }

        .product-card:hover .product-image {
            transform: scale(1.1);
        }

        .product-brand {
            font-size: 0.9em;
            letter-spacing: 0.2em;
            color: #3d2817;
            text-transform: uppercase;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .product-name {
            font-size: 1.5em;
            color: #ffffff;
            margin-bottom: 15px;
            letter-spacing: 0.05em;
            font-weight: 400;
        }

        .product-price {
            font-size: 1.8em;
            color: #FFD700;
            font-weight: 300;
            letter-spacing: 0.05em;
        }

        .carousel-nav {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 40px;
        }

        .carousel-button {
            width: 50px;
            height: 50px;
            border: 2px solid #FFD700;
            background: transparent;
            color: #FFD700;
            border-radius: 50%;
            font-size: 1.5em;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .carousel-button::before {
            content: '';
            position: absolute;
            inset: 0;
            background: #FFD700;
            transform: scale(0);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 50%;
        }

        .carousel-button:hover::before {
            transform: scale(1);
        }

        .carousel-button:hover {
            color: #ffffff;
        }

        .carousel-button span {
            position: relative;
            z-index: 1;
        }

        .carousel-dots {
            display: flex;
            gap: 12px;
        }

        .carousel-dot {
            width: 10px;
            height: 10px;
            border: 1px solid rgba(26, 15, 10, 0.5);
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
        }

        .carousel-dot.active {
            background: #1a0f0a;
            box-shadow: 0 0 15px rgba(26, 15, 10, 0.6);
            transform: scale(1.3);
        }

        .brand-filter-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 40px;
        }

        /* Loading Animation */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in-up {
            animation: fadeInUp 1s ease-out forwards;
        }
    </style>
</head>
<body>
    <!-- Custom Cursor -->
    <div id="cursor"></div>
    <div id="cursor-follower"></div>

    <!-- Slide Navigation -->
    <div class="slide-nav">
        <div class="nav-dot active" data-slide="Intro" onclick="scrollToSlide(0)"></div>
        <div class="nav-dot" data-slide="Heritage" onclick="scrollToSlide(1)"></div>
        <div class="nav-dot" data-slide="Timeline" onclick="scrollToSlide(2)"></div>
        <div class="nav-dot" data-slide="Brands" onclick="scrollToSlide(3)"></div>
        <div class="nav-dot" data-slide="Insights" onclick="scrollToSlide(4)"></div>
        <div class="nav-dot" data-slide="Market Today" onclick="scrollToSlide(5)"></div>
        <div class="nav-dot" data-slide="Overview" onclick="scrollToSlide(6)"></div>
        <div class="nav-dot" data-slide="Traffic" onclick="scrollToSlide(7)"></div>
        <div class="nav-dot" data-slide="Market Insights" onclick="scrollToSlide(8)"></div>
        <div class="nav-dot" data-slide="Products" onclick="scrollToSlide(9)"></div>
        <div class="nav-dot" data-slide="Best Sellers" onclick="scrollToSlide(10)"></div>
        <div class="nav-dot" data-slide="Distribution" onclick="scrollToSlide(11)"></div>
        <div class="nav-dot" data-slide="Product Insights" onclick="scrollToSlide(12)"></div>
        <div class="nav-dot" data-slide="Resale" onclick="scrollToSlide(13)"></div>
        <div class="nav-dot" data-slide="Resale Market" onclick="scrollToSlide(14)"></div>
        <div class="nav-dot" data-slide="Vestiaire" onclick="scrollToSlide(15)"></div>
        <div class="nav-dot" data-slide="Resale Insights" onclick="scrollToSlide(16)"></div>
        <div class="nav-dot" data-slide="Thanks" onclick="scrollToSlide(17)"></div>
        <div class="nav-dot" data-slide="Team" onclick="scrollToSlide(18)"></div>
    </div>

    <div class="scroll-container">
        <!-- Slide 1: Title -->
        <section class="slide slide-1">
            <div class="slide-content">
                <div class="title-container">
                    <h1 class="main-title">Luxury</h1>
                    <div class="decorative-line"></div>
                    <p class="subtitle">A Data Story of Fashion Excellence</p>
                    <div class="scroll-hint">
                        <div class="scroll-indicator"></div>
                        Scroll to Explore
                    </div>
                </div>
            </div>
        </section>

        <!-- Slide 2: Chapter 1 - Heritage Intro -->
        <section class="slide slide-chapter">
            <div class="slide-content">
                <div class="chapter-content">
                    <div class="chapter-number">CHAPTER I</div>
                    <h1 class="chapter-title">The Heritage</h1>
                    <div class="decorative-line"></div>
                    <p class="chapter-text">
                        Before the billions in revenue, before the global reach, there were visionaries.<br><br>
                        Three houses. Three centuries. Three distinct philosophies that would come to define luxury itself.<br><br>
                        This is where our story beginsâ€”with the craftsmen who built empires from leather and thread.
                    </p>
                </div>
            </div>
        </section>

        <!-- Slide 3: Brand Timeline History -->
        <section class="slide slide-3">
            <div class="slide-content">
                <h2 class="section-title">Heritage & Evolution</h2>
                <p class="section-subtitle">A journey through centuries of luxury craftsmanship</p>
                
                <div class="timeline-controls">
                    <button class="luxury-button active" data-timeline-brand="all">All Brands</button>
                    <button class="luxury-button" data-timeline-brand="HermÃ¨s">HermÃ¨s (1837)</button>
                    <button class="luxury-button" data-timeline-brand="Gucci">Gucci (1921)</button>
                    <button class="luxury-button" data-timeline-brand="Coach">Coach (1941)</button>
                </div>

                <div style="text-align: center; margin: 20px 0; padding: 15px; background: rgba(139, 111, 71, 0.1); border-radius: 10px; border: 1px solid rgba(139, 111, 71, 0.3);">
                    <p style="color: #ffffff; font-size: 0.95em; letter-spacing: 0.1em; margin: 0;">
                        <span style="font-size: 1.2em;">ðŸ’¡</span> 
                        <strong>HOW TO EXPLORE:</strong> Click the colored dots to navigate the timeline and discover key moments in luxury fashion history
                    </p>
                </div>

                <div class="timeline-container">
                    <div class="timeline-scroll-container">
                        <div id="brand-timeline"></div>
                    </div>
                    
                    <div class="timeline-legend">
                        <div class="legend-item">
                            <div class="legend-dot" style="background: #8B2635; border-color: #8B2635;"></div>
                            <div class="legend-label">HermÃ¨s (1837)</div>
                        </div>
                        <div class="legend-item">
                            <div class="legend-dot" style="background: #FFD700; border-color: #FFD700;"></div>
                            <div class="legend-label">Gucci (1921)</div>
                        </div>
                        <div class="legend-item">
                            <div class="legend-dot" style="background: #8b4513; border-color: #8b4513;"></div>
                            <div class="legend-label">Coach (1941)</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Slide 4: Brand Comparison -->
        <section class="slide slide-4">
            <div class="slide-content">
                <h2 class="section-title">The Big Three</h2>
                <p class="section-subtitle">HermÃ¨s, Gucci, and Coach define distinct segments of luxury</p>
                
                <div class="brand-grid">
                    <div class="brand-card">
                        <div class="brand-name" style="color: #FFD700;">HERMÃˆS</div>
                        <div class="decorative-line"></div>
                        <div class="brand-metric">$16.4B</div>
                        <div class="stat-label">2024 Revenue</div>
                        <p class="brand-description">Ultra-luxury positioning with exceptional craftsmanship and timeless appeal</p>
                    </div>
                    <div class="brand-card">
                        <div class="brand-name" style="color: #ffffff;">GUCCI</div>
                        <div class="decorative-line"></div>
                        <div class="brand-metric">$14.9B</div>
                        <div class="stat-label">2024 Revenue</div>
                        <p class="brand-description">Bold contemporary luxury with mass appeal and cultural relevance</p>
                    </div>
                    <div class="brand-card">
                        <div class="brand-name" style="color: #FFD700;">COACH</div>
                        <div class="decorative-line"></div>
                        <div class="brand-metric">$1.2B</div>
                        <div class="stat-label">2024 Revenue</div>
                        <p class="brand-description">Accessible luxury with American heritage and practical elegance</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Slide 4.5: Heritage Insights -->
        <section class="slide slide-insights">
            <div class="slide-content">
                <h2 class="section-title">What History Reveals</h2>
                <div class="insights-grid">
                    <div class="insight-card">
                        <div class="insight-icon">ðŸ“œ</div>
                        <div class="insight-stat">188 Years</div>
                        <div class="insight-label">HermÃ¨s' Journey</div>
                        <p class="insight-description">
                            From harness maker to haute couture, the oldest of our three houses proves that 
                            longevity breeds luxury. Nearly two centuries of uncompromising craftsmanship.
                        </p>
                    </div>
                    
                    <div class="insight-card">
                        <div class="insight-icon">âš¡</div>
                        <div class="insight-stat">Post-War Boom</div>
                        <div class="insight-label">Three Distinct Eras</div>
                        <p class="insight-description">
                            HermÃ¨s emerged from aristocratic Europe (1837), Gucci from post-WWII Italy (1921), 
                            and Coach from American pragmatism (1941). Three continents, three philosophies.
                        </p>
                    </div>
                    
                    <div class="insight-card">
                        <div class="insight-icon">ðŸ‘œ</div>
                        <div class="insight-stat">Iconic Moments</div>
                        <div class="insight-label">Product Innovation</div>
                        <p class="insight-description">
                            The Birkin (1984), Jackie Bag (1961), and Coach's bonded leather (1941)â€”each 
                            breakthrough redefined what luxury could be. Innovation, not just tradition, drives legacy.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Slide 5: Chapter 2 - Market Today Intro -->
        <section class="slide slide-chapter">
            <div class="slide-content">
                <div class="chapter-content">
                    <div class="chapter-number">CHAPTER II</div>
                    <h1 class="chapter-title">The Market Today</h1>
                    <div class="decorative-line"></div>
                    <p class="chapter-text">
                        From heritage to hypergrowth.<br><br>
                        Today, luxury is no longer confined to Parisian ateliers or Manhattan boutiques. It's a $42+ billion global phenomenon, 
                        driven by digital transformation and emerging markets.<br><br>
                        The data reveals an industry in unprecedented expansionâ€”and unexpected evolution.
                    </p>
                </div>
            </div>
        </section>

        <!-- Slide 6: Market Overview -->
        <section class="slide slide-6">
            <div class="slide-content">
                <h2 class="section-title">Market Overview</h2>
                <p class="section-subtitle">The luxury fashion market spans decades of heritage and billions in revenue</p>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number">$42.6B</div>
                        <div class="stat-label">Total Revenue 2024</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">42K+</div>
                        <div class="stat-label">Resale Items</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">13 Years</div>
                        <div class="stat-label">Historical Data</div>
                    </div>
                </div>

                <div class="viz-container" style="margin-top: 60px;">
                    <div id="overview-chart"></div>
                </div>
            </div>
        </section>

        <!-- Slide 7: Global Traffic Hub -->
        <section class="slide slide-7">
            <div class="slide-content">
                <h2 class="section-title">Global Traffic Hub</h2>
                <p class="section-subtitle">Top 10 countries driving online luxury market engagement in 2024</p>
                
                <div class="viz-container">
                    <div id="global-traffic-viz"></div>
                    <div class="traffic-insights">
                        <div class="insight-box">
                            <div class="insight-label">Fastest Growing</div>
                            <div class="insight-value">Turkey +38.8%</div>
                        </div>
                        <div class="insight-box">
                            <div class="insight-label">Market Leader</div>
                            <div class="insight-value">USA 19.8%</div>
                        </div>
                        <div class="insight-box">
                            <div class="insight-label">Combined Traffic</div>
                            <div class="insight-value">72.8%</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Slide 7.5: Market Insights -->
        <section class="slide slide-insights">
            <div class="slide-content">
                <h2 class="section-title">The New Geography of Desire</h2>
                <div class="insights-grid">
                    <div class="insight-card highlight-card">
                        <div class="insight-icon">ðŸ‡¹ðŸ‡·</div>
                        <div class="insight-stat">+38.8%</div>
                        <div class="insight-label">Turkey Leads Growth</div>
                        <p class="insight-description">
                            While the US dominates with 19.8% market share, Turkey is the sleeping giantâ€”
                            growing faster than any other market. The future of luxury isn't where you think.
                        </p>
                    </div>
                    
                    <div class="insight-card">
                        <div class="insight-icon">ðŸŒ</div>
                        <div class="insight-stat">Asia Rising</div>
                        <div class="insight-label">3 of Top 10</div>
                        <p class="insight-description">
                            India, Japan, and Vietnam collectively represent 18.7% of global traffic. 
                            Asia's luxury appetite is reshaping brand strategies worldwide.
                        </p>
                    </div>
                    
                    <div class="insight-card">
                        <div class="insight-icon">ðŸ’»</div>
                        <div class="insight-stat">Digital First</div>
                        <div class="insight-label">The Online Shift</div>
                        <p class="insight-description">
                            72.8% of all luxury traffic comes from just 10 countriesâ€”but it's all happening online. 
                            The boutique experience has gone digital, and there's no going back.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Slide 8: Chapter 3 - Products Intro -->
        <section class="slide slide-chapter">
            <div class="slide-content">
                <div class="chapter-content">
                    <div class="chapter-number">CHAPTER III</div>
                    <h1 class="chapter-title">The Products</h1>
                    <div class="decorative-line"></div>
                    <p class="chapter-text">
                        Icons are not bornâ€”they are meticulously crafted.<br><br>
                        From the Birkin to the Marmont, certain pieces transcend mere accessories to become cultural symbols. 
                        These are the products that define desire, drive revenue, and create lifelong brand devotion.<br><br>
                        Let's explore what the world is buying.
                    </p>
                </div>
            </div>
        </section>

        <!-- Slide 9: Product Showcase Carousel -->
        <section class="slide slide-9">
            <div class="slide-content">
                <h2 class="section-title">Best Sellers</h2>
                <p class="section-subtitle">A curated selection of iconic pieces from each house</p>
                
                <div class="brand-filter-buttons">
                    <button class="luxury-button active" data-product-brand="all">All Products</button>
                    <button class="luxury-button" data-product-brand="Coach">Coach</button>
                    <button class="luxury-button" data-product-brand="Gucci">Gucci</button>
                    <button class="luxury-button" data-product-brand="HermÃ¨s">HermÃ¨s</button>
                </div>

                <div class="carousel-container">
                    <div class="carousel-track" id="product-carousel">
                        <!-- Products will be dynamically loaded here -->
                    </div>
                </div>

                <div class="carousel-nav">
                    <button class="carousel-button" id="carousel-prev"><span>â€¹</span></button>
                    <div class="carousel-dots" id="carousel-dots"></div>
                    <button class="carousel-button" id="carousel-next"><span>â€º</span></button>
                </div>
            </div>
        </section>

        <!-- Slide 9.5: Luxury Pricing Indicators -->
        <section class="slide slide-pricing">
            <div class="slide-content">
                <h2 class="section-title">Luxury Price Positioning</h2>
                <p class="section-subtitle">Price range indicators reveal brand hierarchy and market positioning</p>
                
                <div class="viz-container">
                    <div id="pricing-viz"></div>
                </div>
            </div>
        </section>

        <!-- Slide 10: Market Distribution -->
        <section class="slide slide-10">
            <div class="slide-content">
                <h2 class="section-title">Market Distribution</h2>
                <p class="section-subtitle">Category breakdown reveals strategic positioning</p>
                
                <div class="viz-container">
                    <div id="distribution-chart"></div>
                </div>
            </div>
        </section>

        <!-- Slide 10.5: Product Insights -->
        <section class="slide slide-insights">
            <div class="slide-content">
                <h2 class="section-title">What 74,000 Items Tell Us</h2>
                <div class="insights-grid">
                    <div class="insight-card">
                        <div class="insight-icon">ðŸ‘Ÿ</div>
                        <div class="insight-stat">57%</div>
                        <div class="insight-label">Gucci's Power Play</div>
                        <p class="insight-description">
                            Gucci dominates with 42,115 items across categoriesâ€”that's more than HermÃ¨s and Coach 
                            combined. Their accessible luxury strategy floods the market with desirability.
                        </p>
                    </div>
                    
                    <div class="insight-card highlight-card">
                        <div class="insight-icon">ðŸ’Ž</div>
                        <div class="insight-stat">Accessories Win</div>
                        <div class="insight-label">62% of HermÃ¨s</div>
                        <p class="insight-description">
                            For ultra-luxury, it's all about the bag. HermÃ¨s' 12,431 accessories (vs. 2,247 apparel) 
                            prove that in the stratosphere of luxury, accessories are the ultimate status symbol.
                        </p>
                    </div>
                    
                    <div class="insight-card">
                        <div class="insight-icon">ðŸ“Š</div>
                        <div class="insight-stat">3% Market</div>
                        <div class="insight-label">Coach's Challenge</div>
                        <p class="insight-description">
                            With just 2,264 items (3% of the market), Coach faces an uphill battle. 
                            But smaller presence doesn't mean smaller ambitionâ€”accessible luxury is still luxury.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Slide 11: Chapter 4 - Resale Revolution Intro -->
        <section class="slide slide-chapter">
            <div class="slide-content">
                <div class="chapter-content">
                    <div class="chapter-number">CHAPTER IV</div>
                    <h1 class="chapter-title">The Resale Revolution</h1>
                    <div class="decorative-line"></div>
                    <p class="chapter-text">
                        A new economy is emergingâ€”one where pre-loved is prestigious.<br><br>
                        The secondary market isn't just about sustainability; it's a powerful indicator of brand equity. 
                        When a Birkin sells for more than retail decades later, it reveals something profound about value, desire, and legacy.<br><br>
                        Here's what the resale market tells us about these brands.
                    </p>
                </div>
            </div>
        </section>

        <!-- Slide 12: Resale Market -->
        <section class="slide slide-12">
            <div class="slide-content">
                <h2 class="section-title">Resale Market</h2>
                <p class="section-subtitle">Secondary market reveals brand value retention and desirability</p>
                
                <div class="viz-container">
                    <div id="resale-chart"></div>
                    <div class="controls">
                        <button class="luxury-button active" data-category="all">All Categories</button>
                        <button class="luxury-button" data-category="Accessories">Accessories</button>
                        <button class="luxury-button" data-category="Apparel">Apparel</button>
                        <button class="luxury-button" data-category="Shoes">Shoes</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Slide 12.3: Vestiaire Market Analysis -->
        <section class="slide slide-vestiaire">
            <div class="slide-content">
                <h2 class="section-title">The Vestiaire Marketplace</h2>
                <p class="section-subtitle">Real-time pricing data from 62,000+ luxury resale items</p>
                
                <div class="viz-container">
                    <div id="vestiaire-viz"></div>
                    <div class="vestiaire-controls">
                        <button class="luxury-button active" data-vestiaire-view="violin">Price Distribution</button>
                        <button class="luxury-button" data-vestiaire-view="condition">By Condition</button>
                        <button class="luxury-button" data-vestiaire-view="volume">Market Volume</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Slide 12.5: Resale Insights -->
        <section class="slide slide-insights">
            <div class="slide-content">
                <h2 class="section-title">The Value of Legacy</h2>
                <div class="insights-grid">
                    <div class="insight-card highlight-card">
                        <div class="insight-icon">ðŸ’°</div>
                        <div class="insight-stat">52%</div>
                        <div class="insight-label">HermÃ¨s Holds Value</div>
                        <p class="insight-description">
                            An HermÃ¨s accessory retains over half its retail price on the resale market. 
                            Some rare pieces even appreciate. This isn't fashionâ€”it's investment-grade luxury.
                        </p>
                    </div>
                    
                    <div class="insight-card">
                        <div class="insight-icon">ðŸ“ˆ</div>
                        <div class="insight-stat">$1,181</div>
                        <div class="insight-label">Apparel Premium</div>
                        <p class="insight-description">
                            HermÃ¨s apparel resells at $1,181 averageâ€”42% retention from $2,800 retail. 
                            Meanwhile, Coach accessories average just $104. Brand equity translates directly to resale power.
                        </p>
                    </div>
                    
                    <div class="insight-card">
                        <div class="insight-icon">â™»ï¸</div>
                        <div class="insight-stat">Sustainability</div>
                        <div class="insight-label">New Value Model</div>
                        <p class="insight-description">
                            The resale market isn't cannibalizing salesâ€”it's creating new luxury consumers. 
                            A $622 pre-owned HermÃ¨s bag is someone's entry point to the brand ecosystem.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Slide 16: Acknowledgements -->
        <section class="slide slide-16">
            <div class="slide-content">
                <h2 class="section-title">Acknowledgements</h2>
                <p class="section-subtitle">With gratitude to those who made this project possible</p>
                
                <div class="acknowledgements-content">
                    <div class="ack-section">
                        <div class="ack-title">CS1710 Course Staff</div>
                        <p class="ack-text">
                            Special thanks to the teaching assistants and staff of CS1710 for their guidance, 
                            support, and invaluable feedback throughout this project.
                        </p>
                    </div>

                    <div class="ack-section">
                        <div class="ack-title">Data Sources</div>
                        <p class="ack-text">
                            This visualization was made possible through publicly available data from:
                        </p>
                        <ul class="ack-list">
                            <li>Vestiaire Collective - Luxury Resale Market Data</li>
                            <li>Brand Annual Reports & Financial Disclosures</li>
                            <li>Google Trends - Search Interest Data</li>
                            <li>Historical Brand Archives & Documentation</li>
                        </ul>
                    </div>

                    <div class="ack-section">
                        <div class="ack-title">Tools & Technologies</div>
                        <p class="ack-text">
                            Built with D3.js, HTML5, CSS3, and a passion for data storytelling.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Slide 17: Team -->
        <section class="slide slide-17">
            <div class="slide-content">
                <h2 class="section-title">Our Team</h2>
                <p class="section-subtitle">Creators of this luxury data experience</p>
                
                <div class="team-content">
                    <div class="team-grid">
                        <div class="team-member">
                            <div class="team-name">Derin Adeleke</div>
                            <div class="decorative-line"></div>
                            <div class="team-email">
                                <a href="mailto:derinadeleke@college.harvard.edu">derinadeleke@college.harvard.edu</a>
                            </div>
                        </div>

                        <div class="team-member">
                            <div class="team-name">Cindy Sun</div>
                            <div class="decorative-line"></div>
                            <div class="team-email">
                                <a href="mailto:csun@g.harvard.edu">csun@g.harvard.edu</a>
                            </div>
                        </div>

                        <div class="team-member">
                            <div class="team-name">Patience Madumera</div>
                            <div class="decorative-line"></div>
                            <div class="team-email">
                                <a href="mailto:pmadumera@college.harvard.edu">pmadumera@college.harvard.edu</a>
                            </div>
                        </div>
                    </div>

                    <div class="decorative-line" style="margin-top: 80px;"></div>
                    <p style="text-align: center; color: #888; margin-top: 40px; letter-spacing: 0.3em; font-size: 1em;">
                        HARVARD UNIVERSITY â€¢ CS1710 â€¢ FALL 2025
                    </p>
                    <p style="text-align: center; color: #FFD700; margin-top: 20px; letter-spacing: 0.2em; font-size: 0.9em; font-style: italic;">
                        Thank you for exploring with us
                    </p>
                </div>
            </div>
        </section>
    </div>

    <!-- Tooltip -->
    <div class="tooltip"></div>

    <script>
        // Custom Cursor
        const cursor = document.getElementById('cursor');
        const cursorFollower = document.getElementById('cursor-follower');

        document.addEventListener('mousemove', (e) => {
            cursor.style.left = e.clientX + 'px';
            cursor.style.top = e.clientY + 'px';
            
            setTimeout(() => {
                cursorFollower.style.left = e.clientX + 'px';
                cursorFollower.style.top = e.clientY + 'px';
            }, 100);
        });

        document.addEventListener('mousedown', () => {
            cursor.classList.add('active');
        });

        document.addEventListener('mouseup', () => {
            cursor.classList.remove('active');
        });

        // Scroll Navigation
        function scrollToSlide(index) {
            const slides = document.querySelectorAll('.slide');
            slides[index].scrollIntoView({ behavior: 'smooth' });
        }

        // Update navigation dots on scroll
        const scrollContainer = document.querySelector('.scroll-container');
        const navDots = document.querySelectorAll('.nav-dot');
        const slides = document.querySelectorAll('.slide');

        scrollContainer.addEventListener('scroll', () => {
            const scrollPosition = scrollContainer.scrollTop;
            const windowHeight = window.innerHeight;

            slides.forEach((slide, index) => {
                const slideTop = slide.offsetTop;
                const slideBottom = slideTop + slide.offsetHeight;

                if (scrollPosition >= slideTop - windowHeight / 2 && scrollPosition < slideBottom - windowHeight / 2) {
                    navDots.forEach(dot => dot.classList.remove('active'));
                    navDots[index].classList.add('active');

                    // Trigger slide content animation
                    const content = slide.querySelector('.slide-content');
                    if (content && !content.classList.contains('visible')) {
                        content.classList.add('visible');
                    }
                }
            });
        });

        // Initialize first slide
        document.querySelector('.slide-content').classList.add('visible');

        // Tooltip
        const tooltip = d3.select(".tooltip");

        // Brand colors
        const brandColors = {
            "HermÃ¨s": "#8B2635",
            "Gucci": "#FFD700",
            "Coach": "#8b4513"
        };

        // Data
        const revenueData = [
            {Year: 2012, "HermÃ¨s": 4128, Gucci: 3790, Coach: 910},
            {Year: 2013, "HermÃ¨s": 4435, Gucci: 4230, Coach: 970},
            {Year: 2014, "HermÃ¨s": 4832, Gucci: 4550, Coach: 940},
            {Year: 2015, "HermÃ¨s": 5108, Gucci: 4950, Coach: 940},
            {Year: 2016, "HermÃ¨s": 6135, Gucci: 5439, Coach: 940},
            {Year: 2017, "HermÃ¨s": 6701, Gucci: 6883, Coach: 1010},
            {Year: 2018, "HermÃ¨s": 7035, Gucci: 8594, Coach: 1040},
            {Year: 2019, "HermÃ¨s": 7709, Gucci: 10192, Coach: 1060},
            {Year: 2020, "HermÃ¨s": 7295, Gucci: 17630, Coach: 1080},
            {Year: 2021, "HermÃ¨s": 10626, Gucci: 15599, Coach: 1100},
            {Year: 2022, "HermÃ¨s": 12219, Gucci: 18110, Coach: 1120},
            {Year: 2023, "HermÃ¨s": 14535, Gucci: 17839, Coach: 1140},
            {Year: 2024, "HermÃ¨s": 16414, Gucci: 14864, Coach: 1170}
        ];

        const resaleData = [
            {brand: "Coach", category: "Accessories", count: 1627, mean: 104.74},
            {brand: "Coach", category: "Apparel", count: 210, mean: 245.97},
            {brand: "Coach", category: "Shoes", count: 427, mean: 116.26},
            {brand: "Gucci", category: "Accessories", count: 17914, mean: 313.82},
            {brand: "Gucci", category: "Apparel", count: 6668, mean: 688.45},
            {brand: "Gucci", category: "Shoes", count: 17533, mean: 498.12},
            {brand: "HermÃ¨s", category: "Accessories", count: 12431, mean: 621.87},
            {brand: "HermÃ¨s", category: "Apparel", count: 2247, mean: 1181.56},
            {brand: "HermÃ¨s", category: "Shoes", count: 5084, mean: 567.15}
        ];

        // Product Carousel Data and Functionality
        let productData = [];
        let currentProductIndex = 0;
        let currentBrandFilter = "all";
        let filteredProducts = [];

        async function loadProducts() {
            const data = await d3.csv("best_selling_products.csv");
            productData = data;
            filteredProducts = productData;
            createProductCarousel();
        }

        function createProductCarousel() {
            const carousel = d3.select("#product-carousel");
            carousel.html(""); // Clear existing

            filteredProducts.forEach((product, index) => {
                const card = carousel.append("div")
                    .attr("class", "product-card")
                    .style("opacity", 0)
                    .style("transform", "translateY(30px)");

                const imageContainer = card.append("div")
                    .attr("class", "product-image-container");

                imageContainer.append("img")
                    .attr("src", `product_images/${product.Image}`)
                    .attr("alt", product.Product)
                    .attr("class", "product-image");

                card.append("div")
                    .attr("class", "product-brand")
                    .style("color", brandColors[product.Brand])
                    .text(product.Brand);

                card.append("div")
                    .attr("class", "product-name")
                    .text(product.Product);

                card.append("div")
                    .attr("class", "product-price")
                    .text(`$${product.Price}`);

                // Animate card entrance
                card.transition()
                    .duration(600)
                    .delay(index * 100)
                    .style("opacity", 1)
                    .style("transform", "translateY(0)");
            });

            updateCarouselDots();
            updateCarouselPosition();
        }

        function updateCarouselDots() {
            const dotsContainer = d3.select("#carousel-dots");
            dotsContainer.html("");

            const numDots = Math.max(1, filteredProducts.length - 2);
            for (let i = 0; i < numDots; i++) {
                dotsContainer.append("div")
                    .attr("class", "carousel-dot")
                    .classed("active", i === currentProductIndex)
                    .on("click", function() {
                        currentProductIndex = i;
                        updateCarouselPosition();
                    });
            }
        }

        function updateCarouselPosition() {
            const track = d3.select("#product-carousel");
            const offset = -currentProductIndex * 360; // 320px width + 40px gap
            track.style("transform", `translateX(${offset}px)`);

            d3.selectAll(".carousel-dot")
                .classed("active", false)
                .filter((d, i) => i === currentProductIndex)
                .classed("active", true);
        }

        // Carousel navigation
        d3.select("#carousel-prev").on("click", function() {
            if (currentProductIndex > 0) {
                currentProductIndex--;
                updateCarouselPosition();
            }
        });

        d3.select("#carousel-next").on("click", function() {
            const maxIndex = Math.max(0, filteredProducts.length - 3);
            if (currentProductIndex < maxIndex) {
                currentProductIndex++;
                updateCarouselPosition();
            }
        });

        // Brand filter for products
        d3.selectAll(".brand-filter-buttons .luxury-button")
            .on("click", function() {
                const brand = d3.select(this).attr("data-product-brand");
                currentBrandFilter = brand;
                currentProductIndex = 0;

                // Update button states
                d3.selectAll(".brand-filter-buttons .luxury-button")
                    .classed("active", false);
                d3.select(this).classed("active", true);

                // Filter products
                if (brand === "all") {
                    filteredProducts = productData;
                } else {
                    filteredProducts = productData.filter(d => d.Brand === brand);
                }

                createProductCarousel();
            });

        // Pricing Visualization (Slide 9.5)
        function createPricingViz() {
            const pricingData = [
                // HermÃ¨s
                {brand: "HermÃ¨s", product: "Kelly Bag", price: 8500, image: "hermes_kelly.png"},
                {brand: "HermÃ¨s", product: "Birkin Bag", price: 3200, image: "hermes_brikin.png"},
                {brand: "HermÃ¨s", product: "Silk Scarf", price: 1650, image: "hermes_scarf.png"},
                // Gucci
                {brand: "Gucci", product: "GG Marmont", price: 5800, image: "gucci_marmont.png"},
                {brand: "Gucci", product: "Princetown", price: 2300, image: "gucci_prince.png"},
                {brand: "Gucci", product: "Belt Bag", price: 1080, image: "gucci_belt.png"},
                // Coach - Adjusted prices for better spacing
                {brand: "Coach", product: "Tabby Bag", price: 4200, image: "coach_tabby.png"},
                {brand: "Coach", product: "Empire", price: 2100, image: "coach_empire.png"},
                {brand: "Coach", product: "Brooklyn", price: 650, image: "coach_brooklyn.png"},
            ];

            const margin = {top: 40, right: 100, bottom: 100, left: 90};
            const width = 1100 - margin.left - margin.right;
            const height = 420 - margin.top - margin.bottom;

            const svg = d3.select("#pricing-viz")
                .append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr("transform", `translate(${margin.left},${margin.top})`);

            const brandColors = {
                "HermÃ¨s": "#8B4513",
                "Gucci": "#A0522D",
                "Coach": "#D2691E"
            };

            const brands = ["HermÃ¨s", "Gucci", "Coach"];
            
            // Scales
            const x = d3.scaleBand()
                .domain(brands)
                .range([0, width])
                .padding(0.35);

            const y = d3.scaleLinear()
                .domain([0, 9500])
                .range([height, 0]);

            // Add decorative background lines
            for (let i = 1000; i <= 9000; i += 1000) {
                svg.append("line")
                    .attr("x1", 0)
                    .attr("y1", y(i))
                    .attr("x2", 0)
                    .attr("y2", y(i))
                    .attr("stroke", brandColors["HermÃ¨s"])
                    .attr("stroke-width", 1)
                    .attr("stroke-dasharray", "4,4")
                    .attr("opacity", 0.15)
                    .transition()
                    .duration(1500)
                    .ease(d3.easeElasticOut)
                    .attr("x2", width);
            }

            // Add axes
            const xAxis = svg.append("g")
                .attr("transform", `translate(0,${height})`)
                .call(d3.axisBottom(x));
            
            xAxis.selectAll("text")
                .style("font-size", "16px")
                .style("font-weight", "700")
                .style("fill", "#6b5335")
                .attr("dy", "1.5em")
                .style("opacity", 0)
                .transition()
                .duration(800)
                .delay(300)
                .style("opacity", 1);

            const yAxis = svg.append("g")
                .call(d3.axisLeft(y).tickFormat(d => `$${(d/1000).toFixed(1)}k`))
                .style("opacity", 0)
                .transition()
                .duration(800)
                .style("opacity", 1);
                
            yAxis.selectAll("text")
                .style("font-size", "12px")
                .style("fill", "#ffffff")
                .style("font-weight", "600");

            // Create brand groups
            brands.forEach((brand, brandIndex) => {
                const brandData = pricingData.filter(d => d.brand === brand);
                const brandGroup = svg.append("g")
                    .attr("transform", `translate(${x(brand)},0)`);

                // Vertical connecting line with animation
                const prices = brandData.map(d => d.price);
                const line = brandGroup.append("line")
                    .attr("x1", x.bandwidth() / 2)
                    .attr("y1", height)
                    .attr("x2", x.bandwidth() / 2)
                    .attr("y2", height)
                    .attr("stroke", brandColors[brand])
                    .attr("stroke-width", 3)
                    .attr("opacity", 0.3);

                line.transition()
                    .duration(1200)
                    .delay(brandIndex * 200)
                    .ease(d3.easeCubicOut)
                    .attr("y1", y(Math.max(...prices)))
                    .attr("y2", y(Math.min(...prices)));

                // Add glow effect to line
                brandGroup.append("line")
                    .attr("x1", x.bandwidth() / 2)
                    .attr("y1", height)
                    .attr("x2", x.bandwidth() / 2)
                    .attr("y2", height)
                    .attr("stroke", brandColors[brand])
                    .attr("stroke-width", 8)
                    .attr("opacity", 0)
                    .attr("filter", "blur(4px)")
                    .transition()
                    .duration(1200)
                    .delay(brandIndex * 200)
                    .ease(d3.easeCubicOut)
                    .attr("y1", y(Math.max(...prices)))
                    .attr("y2", y(Math.min(...prices)))
                    .attr("opacity", 0.15);

                // Add products with staggered animation
                brandData.forEach((item, itemIndex) => {
                    const itemGroup = brandGroup.append("g")
                        .attr("class", "price-item")
                        .style("cursor", "pointer")
                        .attr("opacity", 0);

                    // Circular background for image - larger size
                    itemGroup.append("circle")
                        .attr("cx", x.bandwidth() / 2)
                        .attr("cy", y(item.price))
                        .attr("r", 42)
                        .attr("fill", "rgba(0, 0, 0, 0.95)")
                        .attr("stroke", brandColors[brand])
                        .attr("stroke-width", 2.5)
                        .attr("filter", "drop-shadow(0 4px 8px rgba(0,0,0,0.15))");

                    // Product image with clip path - larger size
                    const clipId = `clip-${brand}-${itemIndex}`;
                    itemGroup.append("clipPath")
                        .attr("id", clipId)
                        .append("circle")
                        .attr("cx", x.bandwidth() / 2)
                        .attr("cy", y(item.price))
                        .attr("r", 36);

                    itemGroup.append("image")
                        .attr("xlink:href", `product_images/${item.image}`)
                        .attr("x", x.bandwidth() / 2 - 36)
                        .attr("y", y(item.price) - 36)
                        .attr("width", 72)
                        .attr("height", 72)
                        .attr("clip-path", `url(#${clipId})`)
                        .style("opacity", 0.9);

                    // Price connector line with animation
                    const priceLine = itemGroup.append("line")
                        .attr("x1", x.bandwidth() / 2 + 42)
                        .attr("y1", y(item.price))
                        .attr("x2", x.bandwidth() / 2 + 42)
                        .attr("y2", y(item.price))
                        .attr("stroke", brandColors[brand])
                        .attr("stroke-width", 2);

                    priceLine.transition()
                        .duration(600)
                        .delay(brandIndex * 200 + itemIndex * 150 + 800)
                        .attr("x2", x.bandwidth() / 2 + 85);

                    // Price tag background
                    const priceBox = itemGroup.append("rect")
                        .attr("x", x.bandwidth() / 2 + 85)
                        .attr("y", y(item.price) - 16)
                        .attr("width", 0)
                        .attr("height", 32)
                        .attr("rx", 6)
                        .attr("fill", brandColors[brand])
                        .attr("opacity", 0.9);

                    priceBox.transition()
                        .duration(400)
                        .delay(brandIndex * 200 + itemIndex * 150 + 1000)
                        .attr("width", 85);

                    // Price label
                    const priceText = itemGroup.append("text")
                        .attr("x", x.bandwidth() / 2 + 127.5)
                        .attr("y", y(item.price))
                        .attr("dy", "0.35em")
                        .attr("text-anchor", "middle")
                        .style("font-size", "13px")
                        .style("font-weight", "700")
                        .style("fill", "#ffffff")
                        .style("opacity", 0)
                        .text(`$${item.price.toLocaleString()}`);

                    priceText.transition()
                        .duration(400)
                        .delay(brandIndex * 200 + itemIndex * 150 + 1100)
                        .style("opacity", 1);

                    // Product name on hover
                    const nameLabel = itemGroup.append("text")
                        .attr("x", x.bandwidth() / 2)
                        .attr("y", y(item.price) - 60)
                        .attr("text-anchor", "middle")
                        .style("font-size", "11px")
                        .style("font-weight", "600")
                        .style("fill", brandColors[brand])
                        .style("opacity", 0)
                        .style("pointer-events", "none")
                        .text(item.product);

                    // Animate item entrance
                    itemGroup.transition()
                        .duration(600)
                        .delay(brandIndex * 200 + itemIndex * 150 + 600)
                        .attr("opacity", 1);

                    // Hover interactions with bounce effect
                    itemGroup.on("mouseover", function() {
                        d3.select(this).select("circle")
                            .transition()
                            .duration(300)
                            .ease(d3.easeBackOut.overshoot(2))
                            .attr("r", 50)
                            .attr("stroke-width", 3.5);

                        d3.select(this).select("image")
                            .transition()
                            .duration(300)
                            .ease(d3.easeBackOut.overshoot(1.5))
                            .attr("width", 84)
                            .attr("height", 84)
                            .attr("x", x.bandwidth() / 2 - 42)
                            .attr("y", y(item.price) - 42);

                        nameLabel.transition()
                            .duration(200)
                            .style("opacity", 1);

                        d3.select(this).select("rect")
                            .transition()
                            .duration(200)
                            .attr("opacity", 1);
                    })
                    .on("mouseout", function() {
                        d3.select(this).select("circle")
                            .transition()
                            .duration(300)
                            .attr("r", 42)
                            .attr("stroke-width", 2.5);

                        d3.select(this).select("image")
                            .transition()
                            .duration(300)
                            .attr("width", 72)
                            .attr("height", 72)
                            .attr("x", x.bandwidth() / 2 - 36)
                            .attr("y", y(item.price) - 36);

                        nameLabel.transition()
                            .duration(200)
                            .style("opacity", 0);

                        d3.select(this).select("rect")
                            .transition()
                            .duration(200)
                            .attr("opacity", 0.9);
                    });
                });
            });

            // Add title to y-axis with animation - BOLD
            const yAxisLabel = svg.append("text")
                .attr("transform", "rotate(-90)")
                .attr("y", -60)
                .attr("x", -height / 2)
                .attr("text-anchor", "middle")
                .style("font-size", "14px")
                .style("fill", "#6b5335")
                .style("font-weight", "700")
                .style("opacity", 0)
                .text("PRICE (USD)");

            yAxisLabel.transition()
                .duration(800)
                .delay(400)
                .style("opacity", 1);

            // Add decorative brand labels at bottom
            brands.forEach((brand, i) => {
                svg.append("text")
                    .attr("x", x(brand) + x.bandwidth() / 2)
                    .attr("y", height + 70)
                    .attr("text-anchor", "middle")
                    .style("font-size", "11px")
                    .style("fill", brandColors[brand])
                    .style("font-weight", "600")
                    .style("opacity", 0)
                    .text(`${pricingData.filter(d => d.brand === brand).length} PRODUCTS`)
                    .transition()
                    .duration(600)
                    .delay(i * 200 + 1200)
                    .style("opacity", 0.6);
            });
        }

        // Overview Chart (Slide 2)
        function createOverviewChart() {
            const margin = {top: 30, right: 100, bottom: 50, left: 75};
            const width = 1050 - margin.left - margin.right;
            const height = 310 - margin.top - margin.bottom;

            const svg = d3.select("#overview-chart")
                .append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr("transform", `translate(${margin.left},${margin.top})`);

            const brands = ["HermÃ¨s", "Gucci", "Coach"];
            const x = d3.scaleLinear()
                .domain([2012, 2024])
                .range([0, width]);

            const y = d3.scaleLinear()
                .domain([0, 20000])
                .range([height, 0]);

            // Add grid
            svg.append("g")
                .attr("class", "grid")
                .attr("opacity", 0.1)
                .call(d3.axisLeft(y).tickSize(-width).tickFormat(""));

            // Create lines
            brands.forEach((brand, i) => {
                const line = d3.line()
                    .x(d => x(d.Year))
                    .y(d => y(d[brand]))
                    .curve(d3.curveMonotoneX);

                const path = svg.append("path")
                    .datum(revenueData)
                    .attr("fill", "none")
                    .attr("stroke", brandColors[brand])
                    .attr("stroke-width", 3)
                    .attr("d", line)
                    .attr("opacity", 0.8);

                // Animate line drawing
                const totalLength = path.node().getTotalLength();
                path
                    .attr("stroke-dasharray", totalLength + " " + totalLength)
                    .attr("stroke-dashoffset", totalLength)
                    .transition()
                    .duration(2000)
                    .delay(i * 300)
                    .attr("stroke-dashoffset", 0);

                // Add dots
                svg.selectAll(`.dot-${i}`)
                    .data(revenueData)
                    .enter()
                    .append("circle")
                    .attr("cx", d => x(d.Year))
                    .attr("cy", d => y(d[brand]))
                    .attr("r", 0)
                    .attr("fill", brandColors[brand])
                    .attr("stroke", "#0a0a0a")
                    .attr("stroke-width", 2)
                    .on("mouseover", function(event, d) {
                        d3.select(this)
                            .transition()
                            .duration(200)
                            .attr("r", 8);
                        tooltip.style("opacity", 1)
                            .html(`<strong>${brand}</strong><br>Year: ${d.Year}<br>Revenue: $${d[brand].toLocaleString()}M`)
                            .style("left", (event.pageX + 10) + "px")
                            .style("top", (event.pageY - 28) + "px");
                    })
                    .on("mouseout", function() {
                        d3.select(this)
                            .transition()
                            .duration(200)
                            .attr("r", 5);
                        tooltip.style("opacity", 0);
                    })
                    .transition()
                    .duration(500)
                    .delay((d, j) => i * 300 + j * 50 + 2000)
                    .attr("r", 5);
            });

            // Axes
            svg.append("g")
                .attr("class", "axis")
                .attr("transform", `translate(0,${height})`)
                .call(d3.axisBottom(x).tickFormat(d3.format("d")));

            svg.append("g")
                .attr("class", "axis")
                .call(d3.axisLeft(y).tickFormat(d => `$${d/1000}B`));

            // Legend
            const legend = svg.append("g")
                .attr("transform", `translate(${width + 20}, 20)`);

            brands.forEach((brand, i) => {
                const legendRow = legend.append("g")
                    .attr("transform", `translate(0, ${i * 30})`);

                legendRow.append("line")
                    .attr("x1", 0)
                    .attr("x2", 30)
                    .attr("y1", 0)
                    .attr("y2", 0)
                    .attr("stroke", brandColors[brand])
                    .attr("stroke-width", 3);

                legendRow.append("text")
                    .attr("x", 40)
                    .attr("y", 5)
                    .style("font-size", "13px")
                    .style("fill", "#b8b8b8")
                    .text(brand);
            });
        }

        // Global Traffic Visualization (Slide 5)
        function createGlobalTrafficViz() {
            const trafficData = [
                {country: "United States", share: 19.80, growth: 11.80, visits: "500M-2B", region: "Americas"},
                {country: "India", share: 7.50, growth: 23, visits: "500M-2B", region: "Asia"},
                {country: "Japan", share: 7.50, growth: 24.20, visits: "300-499M", region: "Asia"},
                {country: "United Kingdom", share: 5.90, growth: 5.40, visits: "300-499M", region: "Europe"},
                {country: "Russia", share: 5.40, growth: 6, visits: "300-499M", region: "Europe"},
                {country: "Turkey", share: 4.40, growth: 38.80, visits: "200-299M", region: "Europe"},
                {country: "Germany", share: 3.90, growth: 10.40, visits: "200-299M", region: "Europe"},
                {country: "France", share: 3.80, growth: 9.60, visits: "200-299M", region: "Europe"},
                {country: "Vietnam", share: 3.70, growth: 17.60, visits: "200-299M", region: "Asia"},
                {country: "Poland", share: 3.40, growth: 18.10, visits: "200-299M", region: "Europe"}
            ];

            const margin = {top: 30, right: 120, bottom: 50, left: 120};
            const width = 1400 - margin.left - margin.right;
            const height = 450 - margin.top - margin.bottom;

            const svg = d3.select("#global-traffic-viz")
                .append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr("transform", `translate(${margin.left},${margin.top})`);

            // Color scale by region - brown shades and high contrast colors
            const regionColors = {
                "Americas": "#8B4513",
                "Asia": "#D2691E",
                "Europe": "#A0522D"
            };

            // Create radial layout
            const centerX = width / 2;
            const centerY = height / 2;
            const maxRadius = Math.min(width, height) / 2 - 50;

            // Scales
            const radiusScale = d3.scaleSqrt()
                .domain([0, d3.max(trafficData, d => d.share)])
                .range([0, maxRadius]);

            const angleScale = d3.scaleLinear()
                .domain([0, trafficData.length])
                .range([0, 2 * Math.PI]);

            // Create tooltip
            const tooltip = d3.select("#global-traffic-viz")
                .append("div")
                .attr("class", "traffic-tooltip");

            // Draw connecting lines from center
            trafficData.forEach((d, i) => {
                const angle = angleScale(i) - Math.PI / 2;
                const radius = radiusScale(d.share);
                const x = centerX + radius * Math.cos(angle);
                const y = centerY + radius * Math.sin(angle);

                svg.append("line")
                    .attr("x1", centerX)
                    .attr("y1", centerY)
                    .attr("x2", x)
                    .attr("y2", y)
                    .attr("stroke", regionColors[d.region])
                    .attr("stroke-width", 2)
                    .attr("opacity", 0.3)
                    .attr("stroke-dasharray", "5,5");
            });

            // Draw center circle
            svg.append("circle")
                .attr("cx", centerX)
                .attr("cy", centerY)
                .attr("r", 25)
                .attr("fill", "rgba(139, 69, 19, 0.2)")
                .attr("stroke", "#8B4513")
                .attr("stroke-width", 2);

            svg.append("text")
                .attr("x", centerX)
                .attr("y", centerY)
                .attr("text-anchor", "middle")
                .attr("dy", "0.35em")
                .style("font-size", "12px")
                .style("fill", "#8B4513")
                .style("font-weight", "600")
                .text("GLOBAL");

            // Draw country circles
            const countryGroups = svg.selectAll(".country-group")
                .data(trafficData)
                .enter()
                .append("g")
                .attr("class", "country-group")
                .attr("transform", (d, i) => {
                    const angle = angleScale(i) - Math.PI / 2;
                    const radius = radiusScale(d.share);
                    const x = centerX + radius * Math.cos(angle);
                    const y = centerY + radius * Math.sin(angle);
                    return `translate(${x},${y})`;
                });

            // Circles
            countryGroups.append("circle")
                .attr("class", "country-bar")
                .attr("r", 0)
                .attr("fill", d => regionColors[d.region])
                .attr("opacity", 0.85)
                .attr("stroke", d => regionColors[d.region])
                .attr("stroke-width", 2)
                .transition()
                .delay((d, i) => i * 100)
                .duration(800)
                .attr("r", d => 18 + d.share * 1.2);

            // Country labels
            countryGroups.append("text")
                .attr("dy", d => {
                    const size = 18 + d.share * 1.2;
                    return size + 18;
                })
                .attr("text-anchor", "middle")
                .style("font-size", "11px")
                .style("fill", "#6b5335")
                .style("font-weight", "600")
                .text(d => d.country)
                .attr("opacity", 0)
                .transition()
                .delay((d, i) => i * 100 + 400)
                .duration(600)
                .attr("opacity", 1);

            // Traffic share labels on circles
            countryGroups.append("text")
                .attr("text-anchor", "middle")
                .attr("dy", "-0.2em")
                .style("font-size", "12px")
                .style("fill", "#ffffff")
                .style("font-weight", "700")
                .text(d => `${d.share}%`)
                .attr("opacity", 0)
                .transition()
                .delay((d, i) => i * 100 + 400)
                .duration(600)
                .attr("opacity", 1);

            // Growth indicators
            countryGroups.append("text")
                .attr("text-anchor", "middle")
                .attr("dy", "1em")
                .style("font-size", "9px")
                .style("fill", "#F59E0B")
                .style("font-weight", "700")
                .text(d => `â†‘${d.growth}%`)
                .attr("opacity", 0)
                .transition()
                .delay((d, i) => i * 100 + 600)
                .duration(600)
                .attr("opacity", 1);

            // Hover interactions
            countryGroups.selectAll("circle")
                .on("mouseover", function(event, d) {
                    d3.select(this)
                        .transition()
                        .duration(200)
                        .attr("opacity", 1)
                        .attr("stroke-width", 4);

                    tooltip
                        .style("left", (event.pageX + 20) + "px")
                        .style("top", (event.pageY - 20) + "px")
                        .classed("visible", true)
                        .html(`
                            <div class="tooltip-country">${d.country}</div>
                            <div class="tooltip-stat">
                                <span class="tooltip-label">Traffic Share:</span>
                                <span class="tooltip-value">${d.share}%</span>
                            </div>
                            <div class="tooltip-stat">
                                <span class="tooltip-label">YoY Growth:</span>
                                <span class="tooltip-value" style="color: #4ade80">+${d.growth}%</span>
                            </div>
                            <div class="tooltip-stat">
                                <span class="tooltip-label">Total Visits:</span>
                                <span class="tooltip-value">${d.visits}</span>
                            </div>
                            <div class="tooltip-stat">
                                <span class="tooltip-label">Region:</span>
                                <span class="tooltip-value">${d.region}</span>
                            </div>
                        `);
                })
                .on("mouseout", function() {
                    d3.select(this)
                        .transition()
                        .duration(200)
                        .attr("opacity", 0.7)
                        .attr("stroke-width", 2);

                    tooltip.classed("visible", false);
                })
                .on("mousemove", function(event) {
                    tooltip
                        .style("left", (event.pageX + 20) + "px")
                        .style("top", (event.pageY - 20) + "px");
                });

            // Add legend
            const legend = svg.append("g")
                .attr("transform", `translate(${width - 80}, 10)`);

            const regions = ["Americas", "Asia", "Europe"];
            regions.forEach((region, i) => {
                const legendRow = legend.append("g")
                    .attr("transform", `translate(0, ${i * 25})`);

                legendRow.append("circle")
                    .attr("r", 7)
                    .attr("fill", regionColors[region])
                    .attr("opacity", 0.85);

                legendRow.append("text")
                    .attr("x", 15)
                    .attr("dy", "0.35em")
                    .style("font-size", "11px")
                    .style("fill", "#8B4513")
                    .style("font-weight", "600")
                    .text(region);
            });

            // Add concentric circles for scale reference
            [5, 10, 15, 20].forEach(percent => {
                const radius = radiusScale(percent);
                svg.append("circle")
                    .attr("cx", centerX)
                    .attr("cy", centerY)
                    .attr("r", radius)
                    .attr("fill", "none")
                    .attr("stroke", "#A0522D")
                    .attr("stroke-width", 0.5)
                    .attr("stroke-dasharray", "2,4")
                    .attr("opacity", 0.2);

                svg.append("text")
                    .attr("x", centerX + radius + 8)
                    .attr("y", centerY)
                    .style("font-size", "9px")
                    .style("fill", "#8B4513")
                    .style("opacity", "0.5")
                    .text(`${percent}%`);
            });
        }

        // Resale Chart (Slide 6)
        function createResaleChart() {
            const margin = {top: 25, right: 50, bottom: 50, left: 60};
            const width = 800 - margin.left - margin.right;
            const height = 280 - margin.top - margin.bottom;

            const svg = d3.select("#resale-chart")
                .append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr("transform", `translate(${margin.left},${margin.top})`);

            // Original retail prices (approximate new/retail values)
            const originalPrices = {
                "Coach": {"Accessories": 95, "Apparel": 350, "Shoes": 180},
                "Gucci": {"Accessories": 420, "Apparel": 1200, "Shoes": 650},
                "HermÃ¨s": {"Accessories": 1200, "Apparel": 2800, "Shoes": 980}
            };

            // Combine data with original and resale prices
            const combinedData = resaleData.map(d => ({
                ...d,
                originalPrice: originalPrices[d.brand][d.category],
                resalePrice: d.mean,
                retentionRate: ((d.mean / originalPrices[d.brand][d.category]) * 100).toFixed(0)
            }));

            let currentCategory = "all";
            const brands = ["Coach", "Gucci", "HermÃ¨s"];
            const categories = ["Accessories", "Apparel", "Shoes"];

            // Scales
            const x0 = d3.scaleBand()
                .domain(brands)
                .range([0, width])
                .padding(0.3);

            const x1 = d3.scaleBand()
                .domain(categories)
                .range([0, x0.bandwidth()])
                .padding(0.1);

            const x2 = d3.scaleBand()
                .domain(["original", "resale"])
                .range([0, x1.bandwidth()])
                .padding(0.05);

            const y = d3.scaleLinear()
                .domain([0, d3.max(combinedData, d => Math.max(d.originalPrice, d.resalePrice))])
                .range([height, 0])
                .nice();

            // Add grid
            svg.append("g")
                .attr("class", "grid")
                .attr("opacity", 0.1)
                .call(d3.axisLeft(y).tickSize(-width).tickFormat(""));

            // Create grouped bars
            const brandGroups = svg.selectAll(".brand-group")
                .data(brands)
                .enter()
                .append("g")
                .attr("class", "brand-group")
                .attr("transform", d => `translate(${x0(d)},0)`);

            brandGroups.each(function(brand) {
                const brandGroup = d3.select(this);
                
                categories.forEach(category => {
                    const item = combinedData.find(d => d.brand === brand && d.category === category);
                    if (!item) return;

                    const categoryGroup = brandGroup.append("g")
                        .attr("class", "category-group")
                        .attr("transform", `translate(${x1(category)},0)`);

                    // Original price bar (lighter color)
                    categoryGroup.append("rect")
                        .attr("class", "original-bar")
                        .attr("x", x2("original"))
                        .attr("y", height)
                        .attr("width", x2.bandwidth())
                        .attr("height", 0)
                        .attr("fill", brandColors[brand])
                        .attr("opacity", 0.4)
                        .attr("rx", 3)
                        .on("mouseover", function(event) {
                            d3.select(this)
                                .transition()
                                .duration(200)
                                .attr("opacity", 0.6);
                            tooltip.style("opacity", 1)
                                .html(`<strong>${brand} - ${category}</strong><br>
                                       <span style="color: rgba(255, 215, 0, 0.6)">â— Original Retail</span><br>
                                       Price: $${item.originalPrice.toFixed(2)}`)
                                .style("left", (event.pageX + 10) + "px")
                                .style("top", (event.pageY - 28) + "px");
                        })
                        .on("mouseout", function() {
                            d3.select(this)
                                .transition()
                                .duration(200)
                                .attr("opacity", 0.4);
                            tooltip.style("opacity", 0);
                        })
                        .transition()
                        .duration(1000)
                        .delay(100)
                        .attr("y", y(item.originalPrice))
                        .attr("height", height - y(item.originalPrice));

                    // Resale price bar (full color)
                    categoryGroup.append("rect")
                        .attr("class", "resale-bar")
                        .attr("x", x2("resale"))
                        .attr("y", height)
                        .attr("width", x2.bandwidth())
                        .attr("height", 0)
                        .attr("fill", brandColors[brand])
                        .attr("opacity", 0.9)
                        .attr("rx", 3)
                        .on("mouseover", function(event) {
                            d3.select(this)
                                .transition()
                                .duration(200)
                                .attr("opacity", 1);
                            tooltip.style("opacity", 1)
                                .html(`<strong>${brand} - ${category}</strong><br>
                                       <span style="color: #FFD700">â— Resale Price</span><br>
                                       Avg: $${item.resalePrice.toFixed(2)}<br>
                                       Items: ${item.count.toLocaleString()}<br>
                                       <span style="color: ${item.retentionRate > 80 ? '#4ade80' : item.retentionRate > 50 ? '#fbbf24' : '#f87171'}">
                                       Value Retention: ${item.retentionRate}%</span>`)
                                .style("left", (event.pageX + 10) + "px")
                                .style("top", (event.pageY - 28) + "px");
                        })
                        .on("mouseout", function() {
                            d3.select(this)
                                .transition()
                                .duration(200)
                                .attr("opacity", 0.9);
                            tooltip.style("opacity", 0);
                        })
                        .transition()
                        .duration(1000)
                        .delay(200)
                        .attr("y", y(item.resalePrice))
                        .attr("height", height - y(item.resalePrice));

                    // Retention rate labels removed for cleaner look
                });
            });

            // Axes
            const xAxis = svg.append("g")
                .attr("class", "axis")
                .attr("transform", `translate(0,${height})`)
                .call(d3.axisBottom(x0));
            
            xAxis.selectAll("text")
                .style("font-size", "15px")
                .style("fill", "#ffffff")
                .style("font-weight", "600")
                .attr("dy", "1em");
            
            xAxis.selectAll("line")
                .style("stroke", "#ffffff");
            
            xAxis.select(".domain")
                .style("stroke", "#ffffff");

            const yAxis = svg.append("g")
                .attr("class", "axis")
                .call(d3.axisLeft(y).tickFormat(d => `$${d}`));
            
            yAxis.selectAll("text")
                .style("font-size", "12px")
                .style("fill", "#ffffff");
            
            yAxis.selectAll("line")
                .style("stroke", "#ffffff");
            
            yAxis.select(".domain")
                .style("stroke", "#ffffff");

            // Axis labels
            svg.append("text")
                .attr("x", width / 2)
                .attr("y", height + 45)
                .attr("text-anchor", "middle")
                .style("font-size", "14px")
                .style("font-weight", "600")
                .style("fill", "#ffffff")
                .text("Brand");

            svg.append("text")
                .attr("transform", "rotate(-90)")
                .attr("x", -height / 2)
                .attr("y", -45)
                .attr("text-anchor", "middle")
                .style("font-size", "14px")
                .style("font-weight", "600")
                .style("fill", "#ffffff")
                .text("Price (USD)");

            // Legend
            const legend = svg.append("g")
                .attr("transform", `translate(${width - 150}, -25)`);

            legend.append("rect")
                .attr("x", 0)
                .attr("y", 0)
                .attr("width", 20)
                .attr("height", 12)
                .attr("fill", "#ffffff")
                .attr("opacity", 0.4)
                .attr("rx", 2);

            legend.append("text")
                .attr("x", 25)
                .attr("y", 10)
                .style("font-size", "12px")
                .style("fill", "#ffffff")
                .text("Original Retail");

            legend.append("rect")
                .attr("x", 0)
                .attr("y", 20)
                .attr("width", 20)
                .attr("height", 12)
                .attr("fill", "#ffffff")
                .attr("opacity", 0.9)
                .attr("rx", 2);

            legend.append("text")
                .attr("x", 25)
                .attr("y", 30)
                .style("font-size", "12px")
                .style("fill", "#ffffff")
                .text("Resale Price");

            // Category labels below brands
            brandGroups.each(function(brand, brandIndex) {
                const brandGroup = d3.select(this);
                
                categories.forEach((category, catIndex) => {
                    brandGroup.append("text")
                        .attr("x", x1(category) + x1.bandwidth() / 2)
                        .attr("y", height + 20)
                        .attr("text-anchor", "middle")
                        .style("font-size", "10px")
                        .style("fill", "#ffffff")
                        .style("opacity", 0)
                        .text(category.substring(0, 4))
                        .transition()
                        .duration(500)
                        .delay(brandIndex * 300 + catIndex * 100)
                        .style("opacity", 1);
                });
            });

            // Insight text - removed to declutter

            // Filter functionality
            d3.selectAll("#resale-chart ~ .controls .luxury-button")
                .on("click", function() {
                    const category = d3.select(this).attr("data-category");
                    currentCategory = category;

                    d3.select(this.parentNode).selectAll(".luxury-button")
                        .classed("active", false);
                    d3.select(this).classed("active", true);

                    // Update bars
                    brandGroups.selectAll(".category-group")
                        .transition()
                        .duration(500)
                        .style("opacity", function() {
                            const parent = d3.select(this.parentNode);
                            const cats = categories;
                            const idx = Array.from(this.parentNode.children).indexOf(this);
                            const cat = cats[idx];
                            
                            if (category === "all") return 1;
                            return cat === category ? 1 : 0.15;
                        });
                });
        }

        // Vestiaire Market Analysis (Slide 12.3)
        async function createVestiaireViz() {
            // Load all three datasets
            const [coachData, gucciData, hermesData] = await Promise.all([
                d3.csv("vestiaire-coach.csv"),
                d3.csv("vestiaire-gucci.csv"),
                d3.csv("vestiaire-hermes.csv")
            ]);

            // Add brand labels
            coachData.forEach(d => d.brand = "Coach");
            gucciData.forEach(d => d.brand = "Gucci");
            hermesData.forEach(d => d.brand = "HermÃ¨s");

            // Combine all data
            const allData = [...coachData, ...gucciData, ...hermesData]
                .filter(d => d.price_usd && +d.price_usd > 0 && +d.price_usd < 10000) // Filter reasonable prices
                .map(d => ({
                    brand: d.brand,
                    price: +d.price_usd,
                    condition: d.product_condition,
                    category: d.product_category === "Women Clothing" ? "Apparel" : "Accessories",
                    material: d.product_material,
                    sold: d.sold === "TRUE"
                }));

            const margin = {top: 40, right: 80, bottom: 60, left: 80};
            const width = 1100 - margin.left - margin.right;
            const height = 400 - margin.top - margin.bottom;

            const svg = d3.select("#vestiaire-viz")
                .append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr("transform", `translate(${margin.left},${margin.top})`);

            let currentView = "violin";

            // Tooltip
            const tooltip = d3.select("#vestiaire-viz")
                .append("div")
                .attr("class", "traffic-tooltip")
                .style("opacity", 0);

            function updateVisualization(view) {
                svg.selectAll("*").remove();
                currentView = view;

                if (view === "violin") {
                    createViolinPlot();
                } else if (view === "condition") {
                    createConditionChart();
                } else if (view === "volume") {
                    createVolumeChart();
                }
            }

            function createViolinPlot() {
                // Price distribution by brand
                const brands = ["Coach", "Gucci", "HermÃ¨s"];
                
                const x = d3.scaleBand()
                    .domain(brands)
                    .range([0, width])
                    .padding(0.3);

                const y = d3.scaleLinear()
                    .domain([0, 3000])
                    .range([height, 0]);

                // Add axes
                svg.append("g")
                    .attr("transform", `translate(0,${height})`)
                    .call(d3.axisBottom(x))
                    .selectAll("text")
                    .style("font-size", "14px")
                    .style("fill", "#ffffff")
                    .attr("dy", "1em");

                const yAxis = svg.append("g")
                    .call(d3.axisLeft(y).tickFormat(d => `$${d}`));
                
                yAxis.selectAll("text")
                    .style("font-size", "12px")
                    .style("fill", "#ffffff");
                
                yAxis.selectAll("line")
                    .style("stroke", "#ffffff");
                
                yAxis.select(".domain")
                    .style("stroke", "#ffffff");

                // Grid
                svg.append("g")
                    .attr("class", "grid")
                    .attr("opacity", 0.1)
                    .call(d3.axisLeft(y).tickSize(-width).tickFormat(""));

                // Create violin plots for each brand
                brands.forEach(brand => {
                    const brandData = allData.filter(d => d.brand === brand).map(d => d.price);
                    
                    // Calculate statistics
                    const sorted = brandData.sort(d3.ascending);
                    const q1 = d3.quantile(sorted, 0.25);
                    const median = d3.quantile(sorted, 0.5);
                    const q3 = d3.quantile(sorted, 0.75);
                    const mean = d3.mean(sorted);

                    // Box plot
                    const boxWidth = 40;
                    const centerX = x(brand) + x.bandwidth() / 2;

                    // Box
                    svg.append("rect")
                        .attr("x", centerX - boxWidth/2)
                        .attr("y", y(q3))
                        .attr("width", boxWidth)
                        .attr("height", y(q1) - y(q3))
                        .attr("fill", brandColors[brand])
                        .attr("opacity", 0.3)
                        .attr("stroke", brandColors[brand])
                        .attr("stroke-width", 2);

                    // Median line
                    svg.append("line")
                        .attr("x1", centerX - boxWidth/2)
                        .attr("x2", centerX + boxWidth/2)
                        .attr("y1", y(median))
                        .attr("y2", y(median))
                        .attr("stroke", brandColors[brand])
                        .attr("stroke-width", 3);

                    // Mean marker
                    svg.append("circle")
                        .attr("cx", centerX)
                        .attr("cy", y(mean))
                        .attr("r", 5)
                        .attr("fill", "#D2691E")
                        .attr("stroke", "#fff")
                        .attr("stroke-width", 2);

                    // Add labels (no percentages, just dollar amounts)
                    svg.append("text")
                        .attr("x", centerX)
                        .attr("y", y(q3) - 10)
                        .attr("text-anchor", "middle")
                        .style("font-size", "12px")
                        .style("font-weight", "600")
                        .style("fill", "#ffffff")
                        .text(`$${Math.round(mean)}`);
                });

                // Legend
                const legend = svg.append("g")
                    .attr("transform", `translate(${width - 180}, 20)`);

                // Median line legend
                legend.append("line")
                    .attr("x1", 0)
                    .attr("x2", 20)
                    .attr("y1", 0)
                    .attr("y2", 0)
                    .attr("stroke", "#ffffff")
                    .attr("stroke-width", 3);

                legend.append("text")
                    .attr("x", 25)
                    .attr("y", 5)
                    .style("font-size", "12px")
                    .style("fill", "#ffffff")
                    .text("Median Price");

                // Mean marker legend
                legend.append("circle")
                    .attr("cx", 10)
                    .attr("cy", 25)
                    .attr("r", 5)
                    .attr("fill", "#D2691E")
                    .attr("stroke", "#fff")
                    .attr("stroke-width", 2);

                legend.append("text")
                    .attr("x", 25)
                    .attr("y", 30)
                    .style("font-size", "12px")
                    .style("fill", "#ffffff")
                    .text("Mean Price");
                
                // Box legend
                legend.append("rect")
                    .attr("x", 0)
                    .attr("y", 40)
                    .attr("width", 20)
                    .attr("height", 15)
                    .attr("fill", "#ffffff")
                    .attr("opacity", 0.3)
                    .attr("stroke", "#ffffff")
                    .attr("stroke-width", 2);

                legend.append("text")
                    .attr("x", 25)
                    .attr("y", 52)
                    .style("font-size", "12px")
                    .style("fill", "#ffffff")
                    .text("Q1-Q3 Range");

                // Add title
                svg.append("text")
                    .attr("x", width / 2)
                    .attr("y", -20)
                    .attr("text-anchor", "middle")
                    .style("font-size", "16px")
                    .style("fill", "#ffffff")
                    .style("font-weight", "600")
                    .text("Price Distribution by Brand");
            }

            function createConditionChart() {
                // Group by condition and brand
                const conditions = ["Never worn", "Very good condition", "Good condition", "Fair condition"];
                const brands = ["Coach", "Gucci", "HermÃ¨s"];

                const conditionData = [];
                brands.forEach(brand => {
                    conditions.forEach(condition => {
                        const items = allData.filter(d => 
                            d.brand === brand && 
                            (d.condition === condition || d.condition === `${condition}, with tag`)
                        );
                        if (items.length > 0) {
                            conditionData.push({
                                brand,
                                condition,
                                count: items.length,
                                avgPrice: d3.mean(items, d => d.price)
                            });
                        }
                    });
                });

                const x0 = d3.scaleBand()
                    .domain(brands)
                    .range([0, width])
                    .padding(0.2);

                const x1 = d3.scaleBand()
                    .domain(conditions)
                    .range([0, x0.bandwidth()])
                    .padding(0.1);

                const y = d3.scaleLinear()
                    .domain([0, d3.max(conditionData, d => d.avgPrice)])
                    .range([height, 0])
                    .nice();

                // Axes
                svg.append("g")
                    .attr("transform", `translate(0,${height})`)
                    .call(d3.axisBottom(x0))
                    .selectAll("text")
                    .style("font-size", "14px")
                    .style("fill", "#ffffff")
                    .attr("dy", "1em");

                const yAxis = svg.append("g")
                    .call(d3.axisLeft(y).tickFormat(d => `$${d}`));
                
                yAxis.selectAll("text")
                    .style("font-size", "12px")
                    .style("fill", "#ffffff");
                
                yAxis.selectAll("line")
                    .style("stroke", "#ffffff");
                
                yAxis.select(".domain")
                    .style("stroke", "#ffffff");

                // Grid
                svg.append("g")
                    .attr("class", "grid")
                    .attr("opacity", 0.1)
                    .call(d3.axisLeft(y).tickSize(-width).tickFormat(""));

                // Bars
                brands.forEach(brand => {
                    const brandGroup = svg.append("g")
                        .attr("transform", `translate(${x0(brand)},0)`);

                    conditions.forEach(condition => {
                        const data = conditionData.find(d => d.brand === brand && d.condition === condition);
                        if (data) {
                            brandGroup.append("rect")
                                .attr("x", x1(condition))
                                .attr("y", height)
                                .attr("width", x1.bandwidth())
                                .attr("height", 0)
                                .attr("fill", brandColors[brand])
                                .attr("opacity", 0.7 - conditions.indexOf(condition) * 0.15)
                                .attr("rx", 3)
                                .on("mouseover", function(event) {
                                    d3.select(this).attr("opacity", 1);
                                    tooltip.style("opacity", 1)
                                        .html(`
                                            <div style="font-weight: bold; margin-bottom: 5px;">${brand}</div>
                                            <div>${condition}</div>
                                            <div style="color: #FFD700;">Avg: $${Math.round(data.avgPrice)}</div>
                                            <div style="font-size: 0.9em;">Count: ${data.count}</div>
                                        `)
                                        .style("left", (event.pageX + 10) + "px")
                                        .style("top", (event.pageY - 10) + "px");
                                })
                                .on("mouseout", function() {
                                    d3.select(this).attr("opacity", 0.7 - conditions.indexOf(condition) * 0.15);
                                    tooltip.style("opacity", 0);
                                })
                                .transition()
                                .duration(800)
                                .delay((d, i) => i * 50)
                                .attr("y", y(data.avgPrice))
                                .attr("height", height - y(data.avgPrice));
                        }
                    });
                });

                // Title
                svg.append("text")
                    .attr("x", width / 2)
                    .attr("y", -20)
                    .attr("text-anchor", "middle")
                    .style("font-size", "16px")
                    .style("font-weight", "600")
                    .style("fill", "#ffffff")
                    .text("Average Price by Condition");
            }

            function createVolumeChart() {
                // Market volume by brand
                const brands = ["Coach", "Gucci", "HermÃ¨s"];
                const volumeData = brands.map(brand => ({
                    brand,
                    total: allData.filter(d => d.brand === brand).length,
                    sold: allData.filter(d => d.brand === brand && d.sold).length,
                    available: allData.filter(d => d.brand === brand && !d.sold).length
                }));

                const x = d3.scaleBand()
                    .domain(brands)
                    .range([0, width])
                    .padding(0.3);

                const y = d3.scaleLinear()
                    .domain([0, d3.max(volumeData, d => d.total)])
                    .range([height, 0])
                    .nice();

                // Axes
                svg.append("g")
                    .attr("transform", `translate(0,${height})`)
                    .call(d3.axisBottom(x))
                    .selectAll("text")
                    .style("font-size", "14px")
                    .style("fill", "#ffffff")
                    .attr("dy", "1em");

                const yAxis = svg.append("g")
                    .call(d3.axisLeft(y).tickFormat(d => d.toLocaleString()));
                
                yAxis.selectAll("text")
                    .style("font-size", "12px")
                    .style("fill", "#ffffff");
                
                yAxis.selectAll("line")
                    .style("stroke", "#ffffff");
                
                yAxis.select(".domain")
                    .style("stroke", "#ffffff");

                // Grid
                svg.append("g")
                    .attr("class", "grid")
                    .attr("opacity", 0.1)
                    .call(d3.axisLeft(y).tickSize(-width).tickFormat(""));

                // Stacked bars
                volumeData.forEach(d => {
                    const barX = x(d.brand);
                    const barWidth = x.bandwidth();

                    // Available items (bottom)
                    svg.append("rect")
                        .attr("x", barX)
                        .attr("y", height)
                        .attr("width", barWidth)
                        .attr("height", 0)
                        .attr("fill", brandColors[d.brand])
                        .attr("opacity", 0.5)
                        .attr("rx", 3)
                        .transition()
                        .duration(800)
                        .attr("y", y(d.available))
                        .attr("height", height - y(d.available));

                    // Sold items (top)
                    svg.append("rect")
                        .attr("x", barX)
                        .attr("y", height)
                        .attr("width", barWidth)
                        .attr("height", 0)
                        .attr("fill", brandColors[d.brand])
                        .attr("opacity", 0.9)
                        .attr("rx", 3)
                        .on("mouseover", function(event) {
                            tooltip.style("opacity", 1)
                                .html(`
                                    <div style="font-weight: bold; margin-bottom: 5px;">${d.brand}</div>
                                    <div style="color: #4ade80;">Sold: ${d.sold.toLocaleString()}</div>
                                    <div>Available: ${d.available.toLocaleString()}</div>
                                    <div style="color: #FFD700; margin-top: 5px;">Total: ${d.total.toLocaleString()}</div>
                                `)
                                .style("left", (event.pageX + 10) + "px")
                                .style("top", (event.pageY - 10) + "px");
                        })
                        .on("mouseout", function() {
                            tooltip.style("opacity", 0);
                        })
                        .transition()
                        .duration(800)
                        .delay(400)
                        .attr("y", y(d.total))
                        .attr("height", y(d.available) - y(d.total));

                    // Labels
                    svg.append("text")
                        .attr("x", barX + barWidth / 2)
                        .attr("y", y(d.total) - 10)
                        .attr("text-anchor", "middle")
                        .style("font-size", "14px")
                        .style("fill", "#ffffff")
                        .style("font-weight", "600")
                        .text(d.total.toLocaleString())
                        .style("opacity", 0)
                        .transition()
                        .delay(1000)
                        .duration(500)
                        .style("opacity", 1);
                });

                // Legend
                const legend = svg.append("g")
                    .attr("transform", `translate(${width - 150}, 20)`);

                legend.append("rect")
                    .attr("x", 0)
                    .attr("y", 0)
                    .attr("width", 20)
                    .attr("height", 15)
                    .attr("fill", "#ffffff")
                    .attr("opacity", 0.9);

                legend.append("text")
                    .attr("x", 25)
                    .attr("y", 12)
                    .style("font-size", "12px")
                    .style("fill", "#ffffff")
                    .text("Sold");

                legend.append("rect")
                    .attr("x", 0)
                    .attr("y", 25)
                    .attr("width", 20)
                    .attr("height", 15)
                    .attr("fill", "#ffffff")
                    .attr("opacity", 0.5);

                legend.append("text")
                    .attr("x", 25)
                    .attr("y", 37)
                    .style("font-size", "12px")
                    .style("fill", "#ffffff")
                    .text("Available");

                // Title
                svg.append("text")
                    .attr("x", width / 2)
                    .attr("y", -20)
                    .attr("text-anchor", "middle")
                    .style("font-size", "16px")
                    .style("font-weight", "600")
                    .style("fill", "#ffffff")
                    .text(`Market Volume: ${allData.length.toLocaleString()} Items`);
            }

            // Initialize with violin plot
            updateVisualization("violin");

            // Button handlers
            d3.selectAll("[data-vestiaire-view]").on("click", function() {
                const view = d3.select(this).attr("data-vestiaire-view");
                d3.selectAll("[data-vestiaire-view]").classed("active", false);
                d3.select(this).classed("active", true);
                updateVisualization(view);
            });
        }

        // Brand Timeline (Slide 8)
        function createBrandTimeline() {
            const timelineData = [
                // HermÃ¨s Timeline
                {year: 1837, brand: "HermÃ¨s", title: "Founded in Paris", description: "Thierry HermÃ¨s establishes harness workshop on Rue Basse-du-Rempart"},
                {year: 1867, brand: "HermÃ¨s", title: "Universal Exhibition Award", description: "Won recognition for innovation in high-quality horse gear"},
                {year: 1880, brand: "HermÃ¨s", title: "Iconic Location", description: "Charles-Ã‰mile moves workshop to 24 Rue du Faubourg Saint-HonorÃ©"},
                {year: 1922, brand: "HermÃ¨s", title: "Leather Innovation", description: "Ã‰mile HermÃ¨s introduces zippers to leather bags after visiting Canada"},
                {year: 1937, brand: "HermÃ¨s", title: "First Silk Scarf", description: "Created 'Jeu des Omnibus et Dames Blanches' designed by Robert Dumas"},
                {year: 1949, brand: "HermÃ¨s", title: "First Silk Tie", description: "Born from spontaneous request by gentlemen in Cannes"},
                {year: 1956, brand: "HermÃ¨s", title: "The Kelly Bag Legend", description: "Grace Kelly photographed with bag, officially renamed 'Kelly'"},
                {year: 1978, brand: "HermÃ¨s", title: "Jean-Louis Dumas Era", description: "Revolutionized into global luxury brand, expanded into watches and footwear"},
                {year: 1984, brand: "HermÃ¨s", title: "Birkin Bag Created", description: "Inspired by chance meeting with Jane Birkin on Paris-London flight"},
                {year: 1987, brand: "HermÃ¨s", title: "150th Anniversary", description: "Celebrated with fireworks over Pont-Neuf, introduced annual theme tradition"},
                {year: 2001, brand: "HermÃ¨s", title: "Tokyo Maison Opens", description: "Maison HermÃ¨s opens in Ginza, Tokyo"},
                {year: 2010, brand: "HermÃ¨s", title: "petit h Workshop", description: "Pascale Mussard founds unique 'creation in reverse' atelier"},
                {year: 2018, brand: "HermÃ¨s", title: "CAC 40 Entry", description: "Joins France's CAC 40 index, affirming strength and independence"},
                {year: 2020, brand: "HermÃ¨s", title: "HermÃ¨s Beauty Launch", description: "Introduced Rouge HermÃ¨s, first beauty line focused on luxury lip products"},
                {year: 2021, brand: "HermÃ¨s", title: "Ã‰cole HermÃ¨s Opens", description: "19th leather workshop and apprenticeship school for new artisans"},
                
                // Gucci Timeline
                {year: 1921, brand: "Gucci", title: "Founded in Florence", description: "Guccio Gucci opens workshop on Via della Vigna Nuova"},
                {year: 1930, brand: "Gucci", title: "Diamante Fabric Created", description: "Introduced canvas with diamond motif, precursor to GG monogram"},
                {year: 1947, brand: "Gucci", title: "Bamboo Bag Debuts", description: "Iconic Bamboo handbag inspired by founder's son's walking sticks"},
                {year: 1953, brand: "Gucci", title: "New York Expansion", description: "First store outside Italy opens in NYC; introduces Horsebit loafer"},
                {year: 1955, brand: "Gucci", title: "Horsebit Bag", description: "Featured reinterpreted equestrian hardware, became signature element"},
                {year: 1961, brand: "Gucci", title: "Jackie Bag Predecessor", description: "Introduced bag that would become the iconic Jackie 1961"},
                {year: 1966, brand: "Gucci", title: "Flora Motif", description: "Created signature Flora pattern, commissioned for Princess Grace"},
                {year: 1972, brand: "Gucci", title: "First Clothing Store", description: "Dedicated clothing store opens at 699 Fifth Avenue, NYC"},
                {year: 1981, brand: "Gucci", title: "Flora Collection", description: "Flora-inspired collection debuts at Sala Bianca, Florence"},
                {year: 1990, brand: "Gucci", title: "Tom Ford Era Begins", description: "Tom Ford joins, later transforms brand into modern powerhouse"},
                {year: 1999, brand: "Gucci", title: "Gucci Group Formed", description: "Becomes luxury conglomerate under PPR (now Kering)"},
                {year: 2015, brand: "Gucci", title: "Alessandro Michele", description: "New creative director brings eclectic, maximalist aesthetic"},
                
                // Coach Timeline  
                {year: 1941, brand: "Coach", title: "Founded in New York", description: "Small family-run workshop with six leather artisans begins"},
                {year: 1946, brand: "Coach", title: "The Cahns Join", description: "Miles & Lillian bring baseball glove-inspired leather innovation"},
                {year: 1961, brand: "Coach", title: "Bonnie Cashin Era", description: "First creative director introduces brass toggles, bright colors, modern design"},
                {year: 1979, brand: "Coach", title: "First Retail Store", description: "Opens flagship on Madison Avenue, evolves beyond workshop"},
                {year: 1985, brand: "Coach", title: "Sara Lee Acquisition", description: "Sold to Sara Lee Corporation, resources for major growth"},
                {year: 1996, brand: "Coach", title: "Global Expansion", description: "Expands internationally with flagships in Asia and Europe"},
                {year: 2001, brand: "Coach", title: "Goes Public", description: "Listed on NYSE (COH), rapid growth in sales and product lines"},
                {year: 2013, brand: "Coach", title: "Stuart Vevers Appointed", description: "Brings modern energy, centers brand around New York style"},
                {year: 2016, brand: "Coach", title: "Modern Rebranding", description: "Repositions as modern luxury lifestyle brand, launches Coach 1941"},
                {year: 2017, brand: "Coach", title: "Tapestry Inc. Formed", description: "Parent company renamed after acquiring Kate Spade and Stuart Weitzman"},
                {year: 2020, brand: "Coach", title: "Inclusive Expression", description: "Campaigns center on diversity, sustainability, and 'Coach Family'"}
            ];

            const container = d3.select("#brand-timeline");
            container.html("");

            // Create timeline structure
            const minYear = 1830;
            const maxYear = 2025;
            const yearRange = maxYear - minYear;
            const pixelsPerYear = 15;
            const totalWidth = yearRange * pixelsPerYear;

            const timeline = container.append("div")
                .style("position", "relative")
                .style("width", totalWidth + "px")
                .style("min-height", "200px");

            // Add central axis line
            const axis = timeline.append("div")
                .attr("class", "timeline-axis");

            // Add decade markers
            for (let year = 1840; year <= 2020; year += 20) {
                const position = ((year - minYear) / yearRange) * 100;
                timeline.append("div")
                    .attr("class", "timeline-year-marker")
                    .style("position", "absolute")
                    .style("left", position + "%")
                    .style("top", "50%")
                    .text(year);
            }

            // Create dots for each event
            let currentFilter = "all";
            const dots = timeline.selectAll(".timeline-dot")
                .data(timelineData)
                .enter()
                .append("div")
                .attr("class", "timeline-dot")
                .style("left", d => {
                    const position = ((d.year - minYear) / yearRange) * 100;
                    return position + "%";
                })
                .style("background", d => brandColors[d.brand])
                .style("color", d => brandColors[d.brand])
                .style("cursor", "pointer")
                .style("opacity", 0);

            // Add popup to each dot
            dots.each(function(d) {
                const dot = d3.select(this);
                const popup = dot.append("div")
                    .attr("class", "timeline-popup")
                    .style("border-color", brandColors[d.brand]);

                popup.append("div")
                    .attr("class", "timeline-brand-label")
                    .style("background", brandColors[d.brand])
                    .text(d.brand);

                popup.append("div")
                    .attr("class", "timeline-year")
                    .text(d.year);

                popup.append("div")
                    .attr("class", "timeline-title")
                    .text(d.title);

                popup.append("div")
                    .attr("class", "timeline-description")
                    .text(d.description);
            });

            // Animate dots entrance
            dots.transition()
                .duration(500)
                .delay((d, i) => i * 30)
                .style("opacity", 1);

            // Filter functionality - buttons only
            d3.selectAll(".timeline-controls .luxury-button")
                .on("click", function() {
                    const brand = d3.select(this).attr("data-timeline-brand");
                    currentFilter = brand;
                    
                    console.log("Button clicked, brand:", brand);
                    console.log("Total dots:", dots.size());

                    // Update button states
                    d3.selectAll(".timeline-controls .luxury-button")
                        .classed("active", false);
                    d3.select(this).classed("active", true);

                    // Filter dots
                    dots.each(function(d) {
                        const thisDot = d3.select(this);
                        console.log("Checking dot:", d.brand, "against filter:", brand);
                        
                        if (brand === "all") {
                            thisDot.transition()
                                .duration(400)
                                .style("opacity", 1)
                                .style("transform", "translate(-50%, -50%) scale(1)");
                        } else if (d.brand === brand) {
                            thisDot.transition()
                                .duration(400)
                                .style("opacity", 1)
                                .style("transform", "translate(-50%, -50%) scale(1.2)");
                        } else {
                            thisDot.transition()
                                .duration(400)
                                .style("opacity", 0.15)
                                .style("transform", "translate(-50%, -50%) scale(0.8)");
                        }
                    });

                    // Auto-scroll to show the selected brand's events
                    if (brand !== "all") {
                        const scrollContainer = document.querySelector(".timeline-scroll-container");
                        const brandEvents = timelineData.filter(d => d.brand === brand);
                        if (brandEvents.length > 0) {
                            const firstEventYear = Math.min(...brandEvents.map(d => d.year));
                            const scrollPosition = ((firstEventYear - minYear) / yearRange) * totalWidth - 200;
                            scrollContainer.scrollTo({
                                left: Math.max(0, scrollPosition),
                                behavior: 'smooth'
                            });
                        }
                    } else {
                        // Scroll back to beginning for "all"
                        document.querySelector(".timeline-scroll-container").scrollTo({
                            left: 0,
                            behavior: 'smooth'
                        });
                    }
                });
        }

        // Distribution Chart (Slide 7)
        function createDistributionChart() {
            const width = 800;
            const height = 800;
            const radius = Math.min(width, height) / 2 - 40;

            const svg = d3.select("#distribution-chart")
                .append("svg")
                .attr("width", width)
                .attr("height", height)
                .append("g")
                .attr("transform", `translate(${width/2},${height/2})`);

            // Prepare hierarchical data
            const hierarchyData = {
                name: "Luxury Market",
                children: [
                    {
                        name: "HermÃ¨s",
                        children: [
                            {name: "Accessories", value: 12431},
                            {name: "Apparel", value: 2247},
                            {name: "Shoes", value: 5084}
                        ]
                    },
                    {
                        name: "Gucci",
                        children: [
                            {name: "Accessories", value: 17914},
                            {name: "Apparel", value: 6668},
                            {name: "Shoes", value: 17533}
                        ]
                    },
                    {
                        name: "Coach",
                        children: [
                            {name: "Accessories", value: 1627},
                            {name: "Apparel", value: 210},
                            {name: "Shoes", value: 427}
                        ]
                    }
                ]
            };

            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.value)
                .sort((a, b) => b.value - a.value);

            const partition = d3.partition()
                .size([2 * Math.PI, radius]);

            partition(root);

            const arc = d3.arc()
                .startAngle(d => d.x0)
                .endAngle(d => d.x1)
                .innerRadius(d => d.y0)
                .outerRadius(d => d.y1);

            // Color scale
            const color = d3.scaleOrdinal()
                .domain(["HermÃ¨s", "Gucci", "Coach"])
                .range([brandColors["HermÃ¨s"], brandColors["Gucci"], brandColors["Coach"]]);

            // Create paths
            svg.selectAll("path")
                .data(root.descendants().filter(d => d.depth))
                .enter()
                .append("path")
                .attr("d", arc)
                .attr("fill", d => {
                    if (d.depth === 1) return color(d.data.name);
                    return color(d.parent.data.name);
                })
                .attr("opacity", d => d.depth === 1 ? 0.9 : 0.6)
                .attr("stroke", "#0a0a0a")
                .attr("stroke-width", 2)
                .on("mouseover", function(event, d) {
                    d3.select(this)
                        .transition()
                        .duration(200)
                        .attr("opacity", 1);
                    
                    const percentage = ((d.value / root.value) * 100).toFixed(1);
                    tooltip.style("opacity", 1)
                        .html(`<strong>${d.data.name}</strong><br>
                               Items: ${d.value.toLocaleString()}<br>
                               Share: ${percentage}%`)
                        .style("left", (event.pageX + 10) + "px")
                        .style("top", (event.pageY - 28) + "px");
                })
                .on("mouseout", function(event, d) {
                    d3.select(this)
                        .transition()
                        .duration(200)
                        .attr("opacity", d.depth === 1 ? 0.9 : 0.6);
                    tooltip.style("opacity", 0);
                })
                .transition()
                .duration(1000)
                .delay((d, i) => i * 50)
                .attrTween("d", function(d) {
                    const interpolate = d3.interpolate({x0: 0, x1: 0, y0: 0, y1: 0}, d);
                    return function(t) {
                        return arc(interpolate(t));
                    };
                });

            // Add center text
            svg.append("text")
                .attr("text-anchor", "middle")
                .attr("dy", "-0.5em")
                .style("font-size", "2.5em")
                .style("fill", "#FFD700")
                .style("font-weight", "300")
                .text("74K+");

            svg.append("text")
                .attr("text-anchor", "middle")
                .attr("dy", "1.5em")
                .style("font-size", "1.2em")
                .style("fill", "#b8b8b8")
                .style("letter-spacing", "0.1em")
                .text("TOTAL ITEMS");
        }

        // Initialize visualizations when slides become visible
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const slideContent = entry.target.querySelector('.slide-content');
                    if (slideContent && !slideContent.classList.contains('visible')) {
                        slideContent.classList.add('visible');
                    }

                    // Initialize visualizations based on new slide order
                    if (entry.target.classList.contains('slide-3') && !entry.target.dataset.initialized) {
                        createBrandTimeline();
                        entry.target.dataset.initialized = true;
                    }
                    if (entry.target.classList.contains('slide-6') && !entry.target.dataset.initialized) {
                        createOverviewChart();
                        entry.target.dataset.initialized = true;
                    }
                    if (entry.target.classList.contains('slide-7') && !entry.target.dataset.initialized) {
                        createGlobalTrafficViz();
                        entry.target.dataset.initialized = true;
                    }
                    if (entry.target.classList.contains('slide-9') && !entry.target.dataset.initialized) {
                        loadProducts();
                        entry.target.dataset.initialized = true;
                    }
                    if (entry.target.classList.contains('slide-pricing') && !entry.target.dataset.initialized) {
                        createPricingViz();
                        entry.target.dataset.initialized = true;
                    }
                    if (entry.target.classList.contains('slide-10') && !entry.target.dataset.initialized) {
                        createDistributionChart();
                        entry.target.dataset.initialized = true;
                    }
                    if (entry.target.classList.contains('slide-12') && !entry.target.dataset.initialized) {
                        createResaleChart();
                        entry.target.dataset.initialized = true;
                    }
                    if (entry.target.classList.contains('slide-vestiaire') && !entry.target.dataset.initialized) {
                        createVestiaireViz();
                        entry.target.dataset.initialized = true;
                    }
                }
            });
        }, { threshold: 0.3 });

        slides.forEach(slide => observer.observe(slide));
    </script>
</body>
</html>
